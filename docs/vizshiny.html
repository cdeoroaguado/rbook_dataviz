<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 7 Visualización con shiny | Visualización de datos en R</title>
  <meta name="description" content="Notas de clase de dataviz" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 7 Visualización con shiny | Visualización de datos en R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Notas de clase de dataviz" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 7 Visualización con shiny | Visualización de datos en R" />
  
  <meta name="twitter:description" content="Notas de clase de dataviz" />
  

<meta name="author" content="Carlos de Oro Aguado" />


<meta name="date" content="2025-10-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vizplotly.html"/>
<link rel="next" href="referencias.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Visualización de datos en R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Asignatura</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#justificaci%C3%B3n"><i class="fa fa-check"></i>Justificación</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objetivo-general-de-la-asignatura"><i class="fa fa-check"></i>Objetivo general de la asignatura</a></li>
<li class="chapter" data-level="" data-path=""><a href="#resultados-de-aprendizaje-objetivos-espec%C3%ADficos"><i class="fa fa-check"></i>Resultados de aprendizaje (Objetivos específicos)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#temas-de-la-asignatura"><i class="fa fa-check"></i>Temas de la asignatura</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="07-vizshiny.html"><a href="#introducci%C3%B3n-a-r-y-rstudio"><i class="fa fa-check"></i><b>1.1</b> Introducción a R y RStudio</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="07-vizshiny.html"><a href="#qu%C3%A9-es-r"><i class="fa fa-check"></i><b>1.1.1</b> ¿Qué es R?</a></li>
<li class="chapter" data-level="1.1.2" data-path="07-vizshiny.html"><a href="#qu%C3%A9-es-rstudio"><i class="fa fa-check"></i><b>1.1.2</b> ¿Qué es RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="07-vizshiny.html"><a href="#introducci%C3%B3n-a-git-y-github"><i class="fa fa-check"></i><b>1.2</b> Introducción a Git y GitHub</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="07-vizshiny.html"><a href="#qu%C3%A9-es-git"><i class="fa fa-check"></i><b>1.2.1</b> ¿Qué es Git?</a></li>
<li class="chapter" data-level="1.2.2" data-path="07-vizshiny.html"><a href="#qu%C3%A9-es-github"><i class="fa fa-check"></i><b>1.2.2</b> ¿Qué es GitHub?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#pasos-para-publicar-un-libro-bookdown-en-github-pages"><i class="fa fa-check"></i><b>1.3</b> Pasos para publicar un libro <code>bookdown</code> en GitHub Pages</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="07-vizshiny.html"><a href="#video-paso-a-paso-de-la-publicaci%C3%B3n-del-libro-en-github-pages"><i class="fa fa-check"></i><b>1.3.1</b> Video paso a paso de la publicación del libro en GitHub Pages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="etltidyverse.html"><a href="etltidyverse.html"><i class="fa fa-check"></i><b>2</b> ETL con Tidyverse</a>
<ul>
<li class="chapter" data-level="2.1" data-path="etltidyverse.html"><a href="etltidyverse.html#data-frames"><i class="fa fa-check"></i><b>2.1</b> Data Frames</a></li>
<li class="chapter" data-level="2.2" data-path="07-vizshiny.html"><a href="#importaci%C3%B3n-de-datos"><i class="fa fa-check"></i><b>2.2</b> Importación de datos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="07-vizshiny.html"><a href="#importaci%C3%B3n-de-archivos-csv-con-read.table"><i class="fa fa-check"></i><b>2.2.1</b> Importación de archivos <code>csv</code> con <code>read.table()</code></a></li>
<li class="chapter" data-level="2.2.2" data-path="07-vizshiny.html"><a href="#importaci%C3%B3n-de-archivos-txt-delimitados-por-tabulaci%C3%B3n-con-read.table"><i class="fa fa-check"></i><b>2.2.2</b> Importación de archivos <code>txt</code> delimitados por tabulación con <code>read.table()</code></a></li>
<li class="chapter" data-level="2.2.3" data-path="07-vizshiny.html"><a href="#importaci%C3%B3n-de-archivos-csv-con-read.csv"><i class="fa fa-check"></i><b>2.2.3</b> Importación de archivos <code>csv</code> con <code>read.csv()</code></a></li>
<li class="chapter" data-level="2.2.4" data-path="etltidyverse.html"><a href="etltidyverse.html#uso-de-readr-de-tidyverse"><i class="fa fa-check"></i><b>2.2.4</b> Uso de <code>readr</code> de tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="07-vizshiny.html"><a href="#transformaci%C3%B3n-de-datos"><i class="fa fa-check"></i><b>2.3</b> Transformación de datos</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="etltidyverse.html"><a href="etltidyverse.html#el-paquete-dplyr"><i class="fa fa-check"></i><b>2.3.1</b> El paquete <code>dplyr</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="etltidyverse.html"><a href="etltidyverse.html#operador"><i class="fa fa-check"></i><b>2.3.2</b> Operador <code>%&gt;%</code></a></li>
<li class="chapter" data-level="2.3.3" data-path="etltidyverse.html"><a href="etltidyverse.html#filtrar-datos-para-crear-un-subconjunto"><i class="fa fa-check"></i><b>2.3.3</b> Filtrar datos para crear un subconjunto</a></li>
<li class="chapter" data-level="2.3.4" data-path="etltidyverse.html"><a href="etltidyverse.html#acotar-la-lista-de-columnas-con-select"><i class="fa fa-check"></i><b>2.3.4</b> Acotar la lista de columnas con <code>select()</code></a></li>
<li class="chapter" data-level="2.3.5" data-path="etltidyverse.html"><a href="etltidyverse.html#organizar-las-filas"><i class="fa fa-check"></i><b>2.3.5</b> Organizar las filas</a></li>
<li class="chapter" data-level="2.3.6" data-path="07-vizshiny.html"><a href="#a%C3%B1adir-columnas-con-mutate"><i class="fa fa-check"></i><b>2.3.6</b> Añadir columnas con <code>mutate</code></a></li>
<li class="chapter" data-level="2.3.7" data-path="07-vizshiny.html"><a href="#agrupaci%C3%B3n-y-resumen-de-los-datos"><i class="fa fa-check"></i><b>2.3.7</b> Agrupación y resumen de los datos</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="07-vizshiny.html"><a href="#ordenaci%C3%B3n-de-datos"><i class="fa fa-check"></i><b>2.4</b> Ordenación de datos</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="07-vizshiny.html"><a href="#recopilaci%C3%B3n"><i class="fa fa-check"></i><b>2.4.1</b> Recopilación</a></li>
<li class="chapter" data-level="2.4.2" data-path="07-vizshiny.html"><a href="#distribuci%C3%B3n"><i class="fa fa-check"></i><b>2.4.2</b> Distribución</a></li>
<li class="chapter" data-level="2.4.3" data-path="07-vizshiny.html"><a href="#separaci%C3%B3n"><i class="fa fa-check"></i><b>2.4.3</b> Separación</a></li>
<li class="chapter" data-level="2.4.4" data-path="07-vizshiny.html"><a href="#uni%C3%B3n"><i class="fa fa-check"></i><b>2.4.4</b> Unión</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vizestatico.html"><a href="vizestatico.html"><i class="fa fa-check"></i><b>3</b> Exploración y visualización estática de datos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-variables-categ%C3%B3ricas-con-gr%C3%A1ficos-de-barras"><i class="fa fa-check"></i><b>3.1</b> Visualización de variables categóricas con gráficos de barras</a></li>
<li class="chapter" data-level="3.2" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-variable-continua-con-un-histograma"><i class="fa fa-check"></i><b>3.2</b> Visualización de variable continua con un histograma</a></li>
<li class="chapter" data-level="3.3" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-la-covariaci%C3%B3n-con-gr%C3%A1ficos-de-caja"><i class="fa fa-check"></i><b>3.3</b> Visualización de la covariación con gráficos de caja</a></li>
<li class="chapter" data-level="3.4" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-la-covariaci%C3%B3n-con-el-gr%C3%A1fico-de-burbuja"><i class="fa fa-check"></i><b>3.4</b> Visualización de la covariación con el gráfico de burbuja</a></li>
<li class="chapter" data-level="3.5" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-2d-de-contenedores-y-hex%C3%A1gonos"><i class="fa fa-check"></i><b>3.5</b> Visualización 2D de contenedores y hexágonos</a></li>
<li class="chapter" data-level="3.6" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-estad%C3%ADsticas-resumen-de-los-datos"><i class="fa fa-check"></i><b>3.6</b> Visualización de estadísticas ( resumen de los datos)</a></li>
<li class="chapter" data-level="3.7" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-un-gr%C3%A1fico-de-correlaci%C3%B3n"><i class="fa fa-check"></i><b>3.7</b> Visualización de un gráfico de correlación</a></li>
<li class="chapter" data-level="3.8" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-un-gr%C3%A1fico-de-dispersi%C3%B3n"><i class="fa fa-check"></i><b>3.8</b> Visualización de un gráfico de dispersión</a></li>
<li class="chapter" data-level="3.9" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-del-gr%C3%A1fico-de-dispersi%C3%B3n-con-linea-de-tendencia"><i class="fa fa-check"></i><b>3.9</b> Visualización del gráfico de dispersión con linea de tendencia</a></li>
<li class="chapter" data-level="3.10" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-trazado-de-categor%C3%ADas"><i class="fa fa-check"></i><b>3.10</b> Visualización de trazado de categorías</a></li>
<li class="chapter" data-level="3.11" data-path="vizestatico.html"><a href="vizestatico.html#visualizacion-etiquetando-nombres"><i class="fa fa-check"></i><b>3.11</b> Visualizacion etiquetando nombres</a></li>
<li class="chapter" data-level="3.12" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-leyendas"><i class="fa fa-check"></i><b>3.12</b> Visualización de leyendas</a></li>
<li class="chapter" data-level="3.13" data-path="07-vizshiny.html"><a href="#visualiazci%C3%B3n-con-facetas"><i class="fa fa-check"></i><b>3.13</b> Visualiazción con facetas</a></li>
<li class="chapter" data-level="3.14" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-tramas-de-viol%C3%ADn"><i class="fa fa-check"></i><b>3.14</b> Visualización de tramas de violín</a></li>
<li class="chapter" data-level="3.15" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-gr%C3%A1ficos-de-densidad"><i class="fa fa-check"></i><b>3.15</b> Visualización de gráficos de densidad</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ggmap.html"><a href="ggmap.html"><i class="fa fa-check"></i><b>4</b> Visualización de datos geográficos con ggmap</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ggmap.html"><a href="ggmap.html#paquete-ggmap"><i class="fa fa-check"></i><b>4.1</b> Paquete <code>ggmap</code></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="ggmap.html"><a href="ggmap.html#funciones-principales-de-ggmap"><i class="fa fa-check"></i><b>4.1.1</b> Funciones principales de <code>ggmap</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="07-vizshiny.html"><a href="#relaci%C3%B3n-con-ggplot2"><i class="fa fa-check"></i><b>4.1.2</b> Relación con <code>ggplot2</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="07-vizshiny.html"><a href="#construcci%C3%B3n-de-un-mapa-base"><i class="fa fa-check"></i><b>4.2</b> Construcción de un mapa base</a></li>
<li class="chapter" data-level="4.3" data-path="07-vizshiny.html"><a href="#integraci%C3%B3n-de-capas-de-informaci%C3%B3n"><i class="fa fa-check"></i><b>4.3</b> Integración de capas de información</a></li>
<li class="chapter" data-level="4.4" data-path="07-vizshiny.html"><a href="#integraci%C3%B3n-de-capas-vectoriales-desde-shapefiles"><i class="fa fa-check"></i><b>4.4</b> Integración de capas vectoriales desde Shapefiles</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="07-vizshiny.html"><a href="#qu%C3%A9-es-un-shapefile"><i class="fa fa-check"></i><b>4.4.1</b> ¿Qué es un Shapefile?</a></li>
<li class="chapter" data-level="4.4.2" data-path="ggmap.html"><a href="ggmap.html#lectura-de-shapefiles-en-r-con-sf"><i class="fa fa-check"></i><b>4.4.2</b> Lectura de shapefiles en <strong>R</strong> con <code>sf</code></a></li>
<li class="chapter" data-level="4.4.3" data-path="07-vizshiny.html"><a href="#construcci%C3%B3n-de-mapas"><i class="fa fa-check"></i><b>4.4.3</b> Construcción de mapas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="datafaltante.html"><a href="datafaltante.html"><i class="fa fa-check"></i><b>5</b> Análisis con datos faltantes y detección de atípicos</a>
<ul>
<li class="chapter" data-level="5.1" data-path="datafaltante.html"><a href="datafaltante.html#manejo-de-datos-faltantes"><i class="fa fa-check"></i><b>5.1</b> Manejo de datos faltantes</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="datafaltante.html"><a href="datafaltante.html#consecuencias-de-los-datos-faltantes"><i class="fa fa-check"></i><b>5.1.1</b> Consecuencias de los datos faltantes</a></li>
<li class="chapter" data-level="5.1.2" data-path="datafaltante.html"><a href="datafaltante.html#tratamientos-para-los-datos-faltantes"><i class="fa fa-check"></i><b>5.1.2</b> Tratamientos para los datos faltantes</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="07-vizshiny.html"><a href="#manejo-de-datos-at%C3%ADpicos"><i class="fa fa-check"></i><b>5.2</b> Manejo de datos atípicos</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="07-vizshiny.html"><a href="#consecuencias-de-los-datos-at%C3%ADpicos"><i class="fa fa-check"></i><b>5.2.1</b> Consecuencias de los datos atípicos</a></li>
<li class="chapter" data-level="5.2.2" data-path="07-vizshiny.html"><a href="#tratamientos-para-los-datos-at%C3%ADpicos"><i class="fa fa-check"></i><b>5.2.2</b> Tratamientos para los datos atípicos</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-los-datos-faltantes"><i class="fa fa-check"></i><b>5.3</b> Visualización de los datos faltantes</a></li>
<li class="chapter" data-level="5.4" data-path="07-vizshiny.html"><a href="#eliminaci%C3%B3n-de-datos-faltantes"><i class="fa fa-check"></i><b>5.4</b> Eliminación de datos faltantes</a></li>
<li class="chapter" data-level="5.5" data-path="07-vizshiny.html"><a href="#imputaci%C3%B3n-de-datos-con-el-promedio-o-mediana"><i class="fa fa-check"></i><b>5.5</b> Imputación de datos con el promedio o mediana</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="07-vizshiny.html"><a href="#la-importancia-de-la-distribuci%C3%B3n"><i class="fa fa-check"></i><b>5.5.1</b> La importancia de la distribución</a></li>
<li class="chapter" data-level="5.5.2" data-path="07-vizshiny.html"><a href="#imputaci%C3%B3n-con-la-media"><i class="fa fa-check"></i><b>5.5.2</b> Imputación con la media</a></li>
<li class="chapter" data-level="5.5.3" data-path="07-vizshiny.html"><a href="#imputaci%C3%B3n-con-la-mediana"><i class="fa fa-check"></i><b>5.5.3</b> Imputación con la mediana</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="07-vizshiny.html"><a href="#imputaci%C3%B3n-de-datos-con-el-paquete-mice"><i class="fa fa-check"></i><b>5.6</b> Imputación de datos con el paquete <code>mice</code></a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="datafaltante.html"><a href="datafaltante.html#paquete-mice"><i class="fa fa-check"></i><b>5.6.1</b> Paquete <code>MICE</code></a></li>
<li class="chapter" data-level="5.6.2" data-path="07-vizshiny.html"><a href="#par%C3%A1metros-principales-de-mice"><i class="fa fa-check"></i><b>5.6.2</b> Parámetros principales de <code>mice</code></a></li>
<li class="chapter" data-level="5.6.3" data-path="07-vizshiny.html"><a href="#m%C3%A9todos-disponibles-en-mice"><i class="fa fa-check"></i><b>5.6.3</b> Métodos disponibles en <code>mice</code></a></li>
<li class="chapter" data-level="5.6.4" data-path="datafaltante.html"><a href="datafaltante.html#ventajas-y-limitaciones-de-mice"><i class="fa fa-check"></i><b>5.6.4</b> Ventajas y limitaciones de MICE</a></li>
<li class="chapter" data-level="5.6.5" data-path="07-vizshiny.html"><a href="#imputaci%C3%B3n-de-datos-con-emparejamiento-predictivo-medio"><i class="fa fa-check"></i><b>5.6.5</b> Imputación de datos con emparejamiento predictivo medio</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="07-vizshiny.html"><a href="#imputaci%C3%B3n-de-datos-con-modelos-de-regresi%C3%B3n"><i class="fa fa-check"></i><b>5.7</b> Imputación de datos con modelos de regresión</a></li>
<li class="chapter" data-level="5.8" data-path="07-vizshiny.html"><a href="#detecci%C3%B3n-de-datos-at%C3%ADpicos"><i class="fa fa-check"></i><b>5.8</b> Detección de datos atípicos</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="07-vizshiny.html"><a href="#valores-at%C3%ADpicos"><i class="fa fa-check"></i><b>5.8.1</b> Valores atípicos</a></li>
<li class="chapter" data-level="5.8.2" data-path="07-vizshiny.html"><a href="#estad%C3%ADsticas-descriptivas"><i class="fa fa-check"></i><b>5.8.2</b> Estadísticas descriptivas</a></li>
<li class="chapter" data-level="5.8.3" data-path="datafaltante.html"><a href="datafaltante.html#percentiles"><i class="fa fa-check"></i><b>5.8.3</b> Percentiles</a></li>
<li class="chapter" data-level="5.8.4" data-path="datafaltante.html"><a href="datafaltante.html#filtro-de-hampel"><i class="fa fa-check"></i><b>5.8.4</b> Filtro de Hampel</a></li>
<li class="chapter" data-level="5.8.5" data-path="datafaltante.html"><a href="datafaltante.html#prueba-de-grubbs"><i class="fa fa-check"></i><b>5.8.5</b> Prueba de Grubbs</a></li>
<li class="chapter" data-level="5.8.6" data-path="datafaltante.html"><a href="datafaltante.html#prueba-de-dixon"><i class="fa fa-check"></i><b>5.8.6</b> Prueba de Dixon</a></li>
<li class="chapter" data-level="5.8.7" data-path="datafaltante.html"><a href="datafaltante.html#prueba-de-rosner"><i class="fa fa-check"></i><b>5.8.7</b> Prueba de Rosner</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="07-vizshiny.html"><a href="#tratamiento-de-datos-at%C3%ADpicos"><i class="fa fa-check"></i><b>5.9</b> Tratamiento de datos atípicos</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="vizplotly.html"><a href="vizplotly.html"><i class="fa fa-check"></i><b>6</b> Visualización con Plotly</a>
<ul>
<li class="chapter" data-level="6.1" data-path="07-vizshiny.html"><a href="#introducci%C3%B3n-a-plotly"><i class="fa fa-check"></i><b>6.1</b> Introducción a plotly</a></li>
<li class="chapter" data-level="6.2" data-path="07-vizshiny.html"><a href="#introducci%C3%B3n-a-ggplotly"><i class="fa fa-check"></i><b>6.2</b> Introducción a ggplotly</a></li>
<li class="chapter" data-level="6.3" data-path="vizplotly.html"><a href="vizplotly.html#histograma-con-plotly"><i class="fa fa-check"></i><b>6.3</b> Histograma con plotly</a></li>
<li class="chapter" data-level="6.4" data-path="vizplotly.html"><a href="vizplotly.html#barras-con-plotly"><i class="fa fa-check"></i><b>6.4</b> Barras con plotly</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="07-vizshiny.html"><a href="#visualizaci%C3%B3n-de-histogramas-y-barras"><i class="fa fa-check"></i><b>6.4.1</b> Visualización de histogramas y barras</a></li>
<li class="chapter" data-level="6.4.2" data-path="vizplotly.html"><a href="vizplotly.html#boxplots-con-plotly"><i class="fa fa-check"></i><b>6.4.2</b> Boxplots con plotly</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="vizplotly.html"><a href="vizplotly.html#mapas-con-mapbox"><i class="fa fa-check"></i><b>6.5</b> Mapas con mapbox</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="vizplotly.html"><a href="vizplotly.html#mapas-integrados"><i class="fa fa-check"></i><b>6.5.1</b> mapas integrados</a></li>
<li class="chapter" data-level="6.5.2" data-path="07-vizshiny.html"><a href="#mapas-coropl%C3%A9ticos"><i class="fa fa-check"></i><b>6.5.2</b> Mapas coropléticos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="vizshiny.html"><a href="vizshiny.html"><i class="fa fa-check"></i><b>7</b> Visualización con shiny</a>
<ul>
<li class="chapter" data-level="7.1" data-path="vizshiny.html"><a href="vizshiny.html#el-contexto-enfermedades-cardiovasculares"><i class="fa fa-check"></i><b>7.1</b> El contexto: enfermedades cardiovasculares</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="vizshiny.html"><a href="vizshiny.html#atributos-del-conjunto-de-datos"><i class="fa fa-check"></i><b>7.1.1</b> Atributos del conjunto de datos</a></li>
<li class="chapter" data-level="7.1.2" data-path="vizshiny.html"><a href="vizshiny.html#origen-y-descarga"><i class="fa fa-check"></i><b>7.1.2</b> Origen y descarga</a></li>
<li class="chapter" data-level="7.1.3" data-path="vizshiny.html"><a href="vizshiny.html#estructura-de-la-app"><i class="fa fa-check"></i><b>7.1.3</b> Estructura de la App</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-vizshiny.html"><a href="#preparaci%C3%B3n-del-entorno"><i class="fa fa-check"></i><b>7.2</b> Preparación del entorno</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="07-vizshiny.html"><a href="#estructura-del-c%C3%B3digo"><i class="fa fa-check"></i><b>7.2.1</b> Estructura del código</a></li>
<li class="chapter" data-level="7.2.2" data-path="vizshiny.html"><a href="vizshiny.html#tarea-1-crear-proyecto-de-la-app"><i class="fa fa-check"></i><b>7.2.2</b> Tarea 1: Crear proyecto de la app</a></li>
<li class="chapter" data-level="7.2.3" data-path="07-vizshiny.html"><a href="#tarea-2-instalaci%C3%B3n-de-paquetes"><i class="fa fa-check"></i><b>7.2.3</b> Tarea 2: Instalación de paquetes</a></li>
<li class="chapter" data-level="7.2.4" data-path="vizshiny.html"><a href="vizshiny.html#tarea-3-establecer-la-caja-de-herramientas"><i class="fa fa-check"></i><b>7.2.4</b> Tarea 3: Establecer la caja de herramientas</a></li>
<li class="chapter" data-level="7.2.5" data-path="vizshiny.html"><a href="vizshiny.html#tarea-4-layout-de-la-interfaz-de-usuario"><i class="fa fa-check"></i><b>7.2.5</b> Tarea 4: Layout de la interfaz de usuario</a></li>
<li class="chapter" data-level="7.2.6" data-path="07-vizshiny.html"><a href="#tarea-5-definir-la-ui-de-la-exploraci%C3%B3n-de-datos"><i class="fa fa-check"></i><b>7.2.6</b> Tarea 5: Definir la ui de la exploración de datos</a></li>
<li class="chapter" data-level="7.2.7" data-path="07-vizshiny.html"><a href="#tarea-6-l%C3%B3gica-del-server-para-la-exploraci%C3%B3n-de-datos"><i class="fa fa-check"></i><b>7.2.7</b> Tarea 6: Lógica del server para la exploración de datos</a></li>
<li class="chapter" data-level="7.2.8" data-path="vizshiny.html"><a href="vizshiny.html#tarea-7-la-interfaz-del-entrenador-en-ui.r"><i class="fa fa-check"></i><b>7.2.8</b> Tarea 7: La interfaz del entrenador en ui.R</a></li>
<li class="chapter" data-level="7.2.9" data-path="vizshiny.html"><a href="vizshiny.html#tarea-8-logica-del-server-para-el-entrenamiento"><i class="fa fa-check"></i><b>7.2.9</b> Tarea 8: Logica del server para el entrenamiento</a></li>
<li class="chapter" data-level="7.2.10" data-path="07-vizshiny.html"><a href="#tarea-9-la-interfaz-de-predicci%C3%B3n"><i class="fa fa-check"></i><b>7.2.10</b> Tarea 9: La Interfaz de predicción</a></li>
<li class="chapter" data-level="7.2.11" data-path="07-vizshiny.html"><a href="#tarea-10-la-l%C3%B3gica-de-predicci%C3%B3n-en-server.r"><i class="fa fa-check"></i><b>7.2.11</b> Tarea 10: La Lógica de predicción en server.R</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="vizshiny.html"><a href="vizshiny.html#ejercicios-practicos"><i class="fa fa-check"></i><b>7.3</b> Ejercicios practicos</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="07-vizshiny.html"><a href="#desaf%C3%ADo-1-f%C3%A1cil-dale-tu-estilo"><i class="fa fa-check"></i><b>7.3.1</b> Desafío 1 (Fácil): ¡Dale tu estilo!</a></li>
<li class="chapter" data-level="7.3.2" data-path="07-vizshiny.html"><a href="#desaf%C3%ADo-2-intermedio-pacientes-de-ejemplo"><i class="fa fa-check"></i><b>7.3.2</b> Desafío 2 (Intermedio): Pacientes de ejemplo</a></li>
<li class="chapter" data-level="7.3.3" data-path="07-vizshiny.html"><a href="#desaf%C3%ADo-3-avanzado-guarda-tu-modelo"><i class="fa fa-check"></i><b>7.3.3</b> Desafío 3 (Avanzado): ¡Guarda tu modelo!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i>Referencias</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualización de datos en R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vizshiny" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Capítulo 7</span> Visualización con shiny<a href="vizshiny.html#vizshiny" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><code>Shiny</code> es un marco para crear <strong>aplicaciones web reactivas</strong> con <strong>R</strong>. Combinado con <strong><code>plotly</code></strong>, permite construir gráficos <strong>interactivos</strong> que responden a entradas del usuario (filtros, clics, selección, zoom) sin salir del ecosistema de R.</p>
<p><strong>Por qué Shiny + plotly</strong>
- Mantienes la <strong>gramática de R</strong> y obtienes una UI web sin escribir JavaScript.
- <code>plotly</code> ya es interactivo; con Shiny <strong>reactivas</strong> los datos, controlas el estado y <strong>vinculas vistas</strong>.
- Útil cuando necesitas: filtros en vivo, selección/brush, descargas, reportes o lógica del lado del servidor.</p>
<p><strong>Cuándo preferir solo <code>plotly</code></strong>
- Explorar/compartir un gráfico único sin lógica adicional (HTML autocontenido).
- Documentos estáticos (Rmd) donde basta con <em>hover/zoom</em> y no hace falta estado compartido.</p>
<p>Patrones clave</p>
<ol style="list-style-type: decimal">
<li><strong>Entradas → datos reactivos → <code>renderPlotly()</code></strong><br />
</li>
<li><strong>Vinculación entre gráficos</strong> con <code>event_data()</code> (clic/selección/hover/zoom).<br />
</li>
<li><strong>Crosstalk</strong> (<code>highlight_key</code>) para enlazar sin servidor (opcional).</li>
</ol>
<div id="el-contexto-enfermedades-cardiovasculares" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> El contexto: enfermedades cardiovasculares<a href="vizshiny.html#el-contexto-enfermedades-cardiovasculares" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Construyamos un tablero con <code>Shiny</code> para la predicción de enfermedades cardiovasculares</p>
<p>Antes de sumergirnos en el código, es crucial entender el “qué” y el “porqué” de nuestro proyecto. Vamos a explorar el problema que intentamos resolver y el conjunto de datos que será nuestra principal herramienta.</p>
<p>Las <strong>enfermedades cardiovasculares</strong> (ECV) son la causa número 1 de muerte en el mundo. Se estima que cada año se cobran <span class="math inline">\(17.9\)</span> millones de vidas, lo que representa el <span class="math inline">\(31\%\)</span> de todas las muertes a nivel global. El fallo cardíaco es un evento común causado por las ECV, y la detección temprana es clave para salvar vidas.</p>
<p>Aquí es donde entra en juego el <strong>Machine Learning</strong>. Al analizar distintos factores de riesgo, podemos construir un modelo que ayude a los profesionales de la salud a predecir la probabilidad de que un paciente sufra una enfermedad cardíaca, permitiendo una intervención temprana y un mejor manejo de la condición.</p>
<div id="atributos-del-conjunto-de-datos" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Atributos del conjunto de datos<a href="vizshiny.html#atributos-del-conjunto-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nuestro conjunto de datos contiene <strong>918 observaciones</strong> (pacientes) y <strong>11 características</strong> (atributos) que usaremos para entrenar nuestro modelo. La duodécima variable, <strong>HeartDisease</strong>, es nuestro objetivo a predecir.</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Nombre del Atributo</th>
<th align="left">Descripción</th>
<th align="left">Valores Posibles</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age</strong></td>
<td align="left">Edad del paciente</td>
<td align="left">Valor numérico</td>
</tr>
<tr class="even">
<td align="left"><strong>Sex</strong></td>
<td align="left">Sexo del paciente</td>
<td align="left">M (Masculino), F (Femenino)</td>
</tr>
<tr class="odd">
<td align="left"><strong>ChestPainType</strong></td>
<td align="left">Tipo de dolor de pecho</td>
<td align="left">TA (Angina Típica), ATA (Angina Atípica), NAP (Dolor No Anginoso), ASY (Asintomático)</td>
</tr>
<tr class="even">
<td align="left"><strong>RestingBP</strong></td>
<td align="left">Presión arterial en reposo</td>
<td align="left">Valor numérico en mm Hg</td>
</tr>
<tr class="odd">
<td align="left"><strong>Cholesterol</strong></td>
<td align="left">Colesterol sérico</td>
<td align="left">Valor numérico en mm/dl</td>
</tr>
<tr class="even">
<td align="left"><strong>FastingBS</strong></td>
<td align="left">Azúcar en sangre en ayunas</td>
<td align="left">1 (&gt; 120 mg/dl), 0 (&lt;= 120 mg/dl)</td>
</tr>
<tr class="odd">
<td align="left"><strong>RestingECG</strong></td>
<td align="left">Resultados del electrocardiograma en reposo</td>
<td align="left">Normal, ST (anormalidad de la onda ST-T), LVH (hipertrofia ventricular izquierda)</td>
</tr>
<tr class="even">
<td align="left"><strong>MaxHR</strong></td>
<td align="left">Frecuencia cardíaca máxima alcanzada</td>
<td align="left">Valor numérico (60-202)</td>
</tr>
<tr class="odd">
<td align="left"><strong>ExerciseAngina</strong></td>
<td align="left">Angina inducida por el ejercicio</td>
<td align="left">Y (Sí), N (No)</td>
</tr>
<tr class="even">
<td align="left"><strong>Oldpeak</strong></td>
<td align="left">Depresión del ST inducida por el ejercicio en relación con el reposo</td>
<td align="left">Valor numérico</td>
</tr>
<tr class="odd">
<td align="left"><strong>ST_Slope</strong></td>
<td align="left">Pendiente del segmento ST en el pico del ejercicio</td>
<td align="left">Up (ascendente), Flat (plano), Down (descendente)</td>
</tr>
<tr class="even">
<td align="left"><strong>HeartDisease</strong></td>
<td align="left">Clase de salida (objetivo)</td>
<td align="left">1 (padece enfermedad cardíaca), 0 (Normal)</td>
</tr>
</tbody>
</table>
</div>
<div id="origen-y-descarga" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Origen y descarga<a href="vizshiny.html#origen-y-descarga" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Este es el conjunto de datos sobre enfermedades cardíacas más grande disponible para investigación hasta la fecha. Fue creado combinando cinco datasets diferentes del UCI Machine Learning Repository.</p>
<p>Puedes descargar el dataset directamente desde Kaggle en el siguiente enlace: <a href="https://raw.githubusercontent.com/cdeoroaguado/Datos/refs/heads/main/dataviz/heart.csv">Descargar Dataset</a></p>
</div>
<div id="estructura-de-la-app" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Estructura de la App<a href="vizshiny.html#estructura-de-la-app" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La app se dividirá en 3 pestañas:</p>
<p><img src="images/app_estructura.svg" /></p>
</div>
</div>
<div id="preparación-del-entorno" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Preparación del entorno<a href="#preparaci%C3%B3n-del-entorno" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="estructura-del-código" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Estructura del código<a href="#estructura-del-c%C3%B3digo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La estructura de carpetas de la aplicación será la siguiente:</p>
<pre><code>├── App 📁
     ├── global.R
     ├── server.R
     ├── ui.R
     ├── heart.csv
     └── www/
          └── heart-pulse.svg
</code></pre>
<p>Nuestra aplicación se compondrá de 3 archivos de <strong>R</strong> principales que trabajan juntos:</p>
<ul>
<li><p><code>global.R:</code> Se ejecuta primero. Contiene la carga de librerías, la carga de datos y el preprocesamiento. Todo lo que se defina aquí (variables, funciones, etc.) estará disponible para los archivos <code>ui.R</code> y <code>server.R</code>.</p></li>
<li><p><code>ui.R:</code> Define la interfaz de usuario. Contiene el objeto <strong>ui</strong>.</p></li>
<li><p><code>server.R:</code> Define la lógica del servidor. Contiene la función server.</p></li>
</ul>
</div>
<div id="tarea-1-crear-proyecto-de-la-app" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Tarea 1: Crear proyecto de la app<a href="vizshiny.html#tarea-1-crear-proyecto-de-la-app" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Crea la carpeta principal: En tu computadora, crea una nueva carpeta para el proyecto. Llámala <code>TallerShiny_Corazon</code>.</p></li>
<li><p>Crea un nuevo proyecto de app en Shiny dando click en el icono que se encuentra en la esquina superior derecha.</p></li>
</ol>
<p><img src="images/shinyapp.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li>En el tipo de aplicación seleciona la opción de archivos multiples y crea la app en la carpeta que creaste.</li>
</ol>
<p><img src="images/create.png" /></p>
<p>Por defecto solo se crean los archivos <code>server.R</code> y <code>ui.R</code>, por lo que se debe crear el archivo <code>global.R</code> manualmente en la carpeta de la app.</p>
<ol start="4" style="list-style-type: decimal">
<li><p>Añade los demás Recursos:</p>
<ul>
<li><p>Crea una subcarpeta llamada exactamente <code>www</code>.</p></li>
<li><p>Copia el archivo <code>heart.csv</code> y pégalo dentro de la carpeta principal TallerShiny_Corazon.</p></li>
<li><p>Copia tu archivo de logo (p. ej., mi_logo.png) y pégalo dentro de la subcarpeta <code>www</code>. Puedes buscar logos en la siguiente pagina: <a href="https://www.svgrepo.com/">Link</a></p></li>
</ul></li>
</ol>
</div>
<div id="tarea-2-instalación-de-paquetes" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Tarea 2: Instalación de paquetes<a href="#tarea-2-instalaci%C3%B3n-de-paquetes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ejecuta el siguiente comando en la consola para instalar todos los paquetes que usaremos:</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="vizshiny.html#cb2-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(</span>
<span id="cb2-2"><a href="vizshiny.html#cb2-2" tabindex="-1"></a>  <span class="st">&quot;shiny&quot;</span>,          <span class="co"># El motor principal de Shiny</span></span>
<span id="cb2-3"><a href="vizshiny.html#cb2-3" tabindex="-1"></a>  <span class="st">&quot;shinydashboard&quot;</span>, <span class="co"># Para crear dashboards atractivos</span></span>
<span id="cb2-4"><a href="vizshiny.html#cb2-4" tabindex="-1"></a>  <span class="st">&quot;tidyverse&quot;</span>,      <span class="co"># Para manipulación de datos (dplyr) y gráficos (ggplot2)</span></span>
<span id="cb2-5"><a href="vizshiny.html#cb2-5" tabindex="-1"></a>  <span class="st">&quot;DT&quot;</span>,             <span class="co"># Para crear tablas de datos interactivas</span></span>
<span id="cb2-6"><a href="vizshiny.html#cb2-6" tabindex="-1"></a>  <span class="st">&quot;plotly&quot;</span>,         <span class="co"># Para hacer nuestros gráficos interactivos</span></span>
<span id="cb2-7"><a href="vizshiny.html#cb2-7" tabindex="-1"></a>  <span class="st">&quot;caret&quot;</span>,          <span class="co"># Para entrenar modelos de Machine Learning</span></span>
<span id="cb2-8"><a href="vizshiny.html#cb2-8" tabindex="-1"></a>  <span class="st">&quot;randomForest&quot;</span>,   <span class="co"># El algoritmo Random Forest</span></span>
<span id="cb2-9"><a href="vizshiny.html#cb2-9" tabindex="-1"></a>  <span class="st">&quot;pROC&quot;</span>            <span class="co"># Para calcular y dibujar la curva ROC</span></span>
<span id="cb2-10"><a href="vizshiny.html#cb2-10" tabindex="-1"></a>))</span></code></pre></div>
</details>
<div id="creando-la-interfaz-principal" class="section level4 hasAnchor" number="7.2.3.1">
<h4><span class="header-section-number">7.2.3.1</span> Creando la interfaz principal<a href="vizshiny.html#creando-la-interfaz-principal" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>En este módulo, construiremos la estructura visual completa de nuestro dashboard: una cabecera profesional con nuestro logo, una barra lateral de navegación y un cuerpo principal donde vivirá nuestro contenido.</p>
<p>En esta app, vamos a utilizar la libreria <code>shinydashboard</code>. Esta libreria facilita la creación de aplicacions al estilo de dashboards en Shiny. <a href="https://rstudio.github.io/shinydashboard/">Referencia shinydashboard</a>.</p>
<p>Toda aplicación <code>shinydashboard</code> se envuelve en una función <code>dashboardPage()</code>. Esta función organiza los tres componentes principales:</p>
<ul>
<li><p><code>dashboardHeader()</code>: La barra superior.</p></li>
<li><p><code>dashboardSidebar()</code>: El menú lateral.</p></li>
<li><p><code>dashboardBody()</code>: El área de contenido principal.</p></li>
</ul>
<p><img src="images/layout.svg" /></p>
</div>
</div>
<div id="tarea-3-establecer-la-caja-de-herramientas" class="section level3 hasAnchor" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Tarea 3: Establecer la caja de herramientas<a href="vizshiny.html#tarea-3-establecer-la-caja-de-herramientas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Abre tu archivo <code>global.R</code> y añade el código para cargar todas las librerías y nuestro conjunto de datos. Este archivo se ejecutará una sola vez al iniciar la app.</li>
</ol>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="vizshiny.html#cb3-1" tabindex="-1"></a><span class="co"># --- Archivo: global.R ---</span></span>
<span id="cb3-2"><a href="vizshiny.html#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="vizshiny.html#cb3-3" tabindex="-1"></a><span class="co"># 1. Cargar las librerías necesarias</span></span>
<span id="cb3-4"><a href="vizshiny.html#cb3-4" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb3-5"><a href="vizshiny.html#cb3-5" tabindex="-1"></a><span class="fu">library</span>(shinydashboard)</span>
<span id="cb3-6"><a href="vizshiny.html#cb3-6" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-7"><a href="vizshiny.html#cb3-7" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb3-8"><a href="vizshiny.html#cb3-8" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb3-9"><a href="vizshiny.html#cb3-9" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb3-10"><a href="vizshiny.html#cb3-10" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span>
<span id="cb3-11"><a href="vizshiny.html#cb3-11" tabindex="-1"></a><span class="fu">library</span>(pROC)</span>
<span id="cb3-12"><a href="vizshiny.html#cb3-12" tabindex="-1"></a></span>
<span id="cb3-13"><a href="vizshiny.html#cb3-13" tabindex="-1"></a><span class="co"># 2. Cargar y preparar los datos</span></span>
<span id="cb3-14"><a href="vizshiny.html#cb3-14" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;heart.csv&quot;</span>)</span>
<span id="cb3-15"><a href="vizshiny.html#cb3-15" tabindex="-1"></a></span>
<span id="cb3-16"><a href="vizshiny.html#cb3-16" tabindex="-1"></a><span class="co"># 3. Renombrar la variable de salida para mayor claridad</span></span>
<span id="cb3-17"><a href="vizshiny.html#cb3-17" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb3-18"><a href="vizshiny.html#cb3-18" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">EnfermedadCorazon =</span> HeartDisease)</span>
<span id="cb3-19"><a href="vizshiny.html#cb3-19" tabindex="-1"></a></span>
<span id="cb3-20"><a href="vizshiny.html#cb3-20" tabindex="-1"></a><span class="co"># 4. Convertir variables a tipo &#39;factor&#39; para un mejor manejo</span></span>
<span id="cb3-21"><a href="vizshiny.html#cb3-21" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb3-22"><a href="vizshiny.html#cb3-22" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-23"><a href="vizshiny.html#cb3-23" tabindex="-1"></a>    <span class="at">Sex =</span> <span class="fu">as.factor</span>(Sex),</span>
<span id="cb3-24"><a href="vizshiny.html#cb3-24" tabindex="-1"></a>    <span class="at">ChestPainType =</span> <span class="fu">as.factor</span>(ChestPainType),</span>
<span id="cb3-25"><a href="vizshiny.html#cb3-25" tabindex="-1"></a>    <span class="at">FastingBS =</span> <span class="fu">as.factor</span>(FastingBS),</span>
<span id="cb3-26"><a href="vizshiny.html#cb3-26" tabindex="-1"></a>    <span class="at">RestingECG =</span> <span class="fu">as.factor</span>(RestingECG),</span>
<span id="cb3-27"><a href="vizshiny.html#cb3-27" tabindex="-1"></a>    <span class="at">ExerciseAngina =</span> <span class="fu">as.factor</span>(ExerciseAngina),</span>
<span id="cb3-28"><a href="vizshiny.html#cb3-28" tabindex="-1"></a>    <span class="at">ST_Slope =</span> <span class="fu">as.factor</span>(ST_Slope),</span>
<span id="cb3-29"><a href="vizshiny.html#cb3-29" tabindex="-1"></a>    <span class="at">EnfermedadCorazon =</span> <span class="fu">as.factor</span>(EnfermedadCorazon)</span>
<span id="cb3-30"><a href="vizshiny.html#cb3-30" tabindex="-1"></a>  )</span>
<span id="cb3-31"><a href="vizshiny.html#cb3-31" tabindex="-1"></a></span>
<span id="cb3-32"><a href="vizshiny.html#cb3-32" tabindex="-1"></a><span class="co"># 5. Cambiar los niveles de la variable objetivo por etiquetas más claras</span></span>
<span id="cb3-33"><a href="vizshiny.html#cb3-33" tabindex="-1"></a><span class="fu">levels</span>(df<span class="sc">$</span>EnfermedadCorazon) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Sí&quot;</span>)</span>
<span id="cb3-34"><a href="vizshiny.html#cb3-34" tabindex="-1"></a></span>
<span id="cb3-35"><a href="vizshiny.html#cb3-35" tabindex="-1"></a><span class="co"># 6. Mensaje de confirmación en la consola</span></span>
<span id="cb3-36"><a href="vizshiny.html#cb3-36" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Datos cargados y preprocesados en global.R</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
</details>
</div>
<div id="tarea-4-layout-de-la-interfaz-de-usuario" class="section level3 hasAnchor" number="7.2.5">
<h3><span class="header-section-number">7.2.5</span> Tarea 4: Layout de la interfaz de usuario<a href="vizshiny.html#tarea-4-layout-de-la-interfaz-de-usuario" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En esta tarea vamos a darle vida a la interfaz de usuario.</p>
<ol style="list-style-type: decimal">
<li>En nuestro archivo <code>ui.R</code>, borramos el contenido para generar el layout base con <code>dashboardPage()</code>:</li>
</ol>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="vizshiny.html#cb4-1" tabindex="-1"></a><span class="co"># --- Archivo: ui.R ---</span></span>
<span id="cb4-2"><a href="vizshiny.html#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="vizshiny.html#cb4-3" tabindex="-1"></a><span class="fu">library</span>(shinydashboard)</span>
<span id="cb4-4"><a href="vizshiny.html#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="vizshiny.html#cb4-5" tabindex="-1"></a><span class="co"># Define la UI (Interfaz de Usuario)</span></span>
<span id="cb4-6"><a href="vizshiny.html#cb4-6" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">dashboardPage</span>(<span class="at">skin =</span> <span class="st">&quot;purple&quot;</span>,</span>
<span id="cb4-7"><a href="vizshiny.html#cb4-7" tabindex="-1"></a>  </span>
<span id="cb4-8"><a href="vizshiny.html#cb4-8" tabindex="-1"></a>)</span></code></pre></div>
</details>
<ol start="2" style="list-style-type: decimal">
<li>Cabecera con logo y titulo:</li>
</ol>
<p>Primero vamos a editar el <code>dashboardHeader()</code>, para incluir nuestro logo (que debemos tener guardado en la carpeta <code>www</code>) y el título. Dentro del <code>dashboardPage()</code> debemos pegar el siguiente codigo:</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="vizshiny.html#cb5-1" tabindex="-1"></a>  <span class="co"># 1. Cabecera del Dashboard</span></span>
<span id="cb5-2"><a href="vizshiny.html#cb5-2" tabindex="-1"></a>  <span class="fu">dashboardHeader</span>(</span>
<span id="cb5-3"><a href="vizshiny.html#cb5-3" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">tagList</span>(</span>
<span id="cb5-4"><a href="vizshiny.html#cb5-4" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">img</span>(<span class="at">src =</span> <span class="st">&#39;mi_logo.png&#39;</span>, <span class="at">height =</span> <span class="st">&#39;45&#39;</span>, <span class="at">style =</span> <span class="st">&quot;padding-right:10px;&quot;</span>),</span>
<span id="cb5-5"><a href="vizshiny.html#cb5-5" tabindex="-1"></a>      <span class="st">&quot;Análisis de Enfermedades Cardíacas&quot;</span></span>
<span id="cb5-6"><a href="vizshiny.html#cb5-6" tabindex="-1"></a>    ),</span>
<span id="cb5-7"><a href="vizshiny.html#cb5-7" tabindex="-1"></a>    <span class="at">titleWidth =</span> <span class="dv">450</span></span>
<span id="cb5-8"><a href="vizshiny.html#cb5-8" tabindex="-1"></a>  ),</span></code></pre></div>
</details>
<ol start="3" style="list-style-type: decimal">
<li>Las pestañas de navegación:</li>
</ol>
<p>Dentro de <code>dashboardSidebar()</code>, usamos <code>sidebarMenu()</code> para crear nuestra navegación. Cada <code>menuItem()</code> representa un botón en el menú.</p>
<ul>
<li><p><code>text</code>: El texto visible.</p></li>
<li><p><code>tabName</code>: Un <code>ID</code> interno que usaremos para conectar el botón con su contenido.</p></li>
<li><p><code>icon</code>: Un pequeño ícono para darle un toque visual.</p></li>
</ul>
<p>Dentro del <code>dashboardPage()</code> y seguido al codigo de <code>dashboardHeader()</code>, incluimos el siguiente codigo para la barra de navegación:</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="vizshiny.html#cb6-1" tabindex="-1"></a>  <span class="co"># 2. Barra Lateral de Navegación</span></span>
<span id="cb6-2"><a href="vizshiny.html#cb6-2" tabindex="-1"></a>  <span class="fu">dashboardSidebar</span>(</span>
<span id="cb6-3"><a href="vizshiny.html#cb6-3" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">450</span>,</span>
<span id="cb6-4"><a href="vizshiny.html#cb6-4" tabindex="-1"></a>    <span class="fu">sidebarMenu</span>(</span>
<span id="cb6-5"><a href="vizshiny.html#cb6-5" tabindex="-1"></a>      <span class="fu">menuItem</span>(<span class="st">&quot;Análisis Exploratorio&quot;</span>, <span class="at">tabName =</span> <span class="st">&quot;eda&quot;</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;chart-bar&quot;</span>)),</span>
<span id="cb6-6"><a href="vizshiny.html#cb6-6" tabindex="-1"></a>      <span class="fu">menuItem</span>(<span class="st">&quot;Entrenamiento del Modelo&quot;</span>, <span class="at">tabName =</span> <span class="st">&quot;entrenamiento&quot;</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;gears&quot;</span>)),</span>
<span id="cb6-7"><a href="vizshiny.html#cb6-7" tabindex="-1"></a>      <span class="fu">menuItem</span>(<span class="st">&quot;Predicciones&quot;</span>, <span class="at">tabName =</span> <span class="st">&quot;predicciones&quot;</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;laptop&quot;</span>))</span>
<span id="cb6-8"><a href="vizshiny.html#cb6-8" tabindex="-1"></a>    )</span>
<span id="cb6-9"><a href="vizshiny.html#cb6-9" tabindex="-1"></a>  ),</span></code></pre></div>
</details>
<ol start="4" style="list-style-type: decimal">
<li>Contenido de cada pestaña (Body):</li>
</ol>
<p>Finalmente, en <code>dashboardBody()</code>, usamos <code>tabItems()</code> para definir el contenido de cada pestaña. Cada <code>tabItem()</code> corresponde a un <code>menuItem</code> de los creados en el paso anterior, y se conectan a través del ID que definimos en <code>tabName</code>.</p>
<p>Dentro del <code>dashboardPage()</code> y seguido al codigo de <code>dashboardSidebar()</code>, incluimos el siguiente codigo para la barra de navegación:</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="vizshiny.html#cb7-1" tabindex="-1"></a><span class="co"># 3. Cuerpo del Dashboard</span></span>
<span id="cb7-2"><a href="vizshiny.html#cb7-2" tabindex="-1"></a>  <span class="fu">dashboardBody</span>(</span>
<span id="cb7-3"><a href="vizshiny.html#cb7-3" tabindex="-1"></a>    <span class="fu">tabItems</span>(</span>
<span id="cb7-4"><a href="vizshiny.html#cb7-4" tabindex="-1"></a>      <span class="co"># Contenido de la Pestaña 1: Análisis Exploratorio</span></span>
<span id="cb7-5"><a href="vizshiny.html#cb7-5" tabindex="-1"></a>      <span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;eda&quot;</span>,</span>
<span id="cb7-6"><a href="vizshiny.html#cb7-6" tabindex="-1"></a>              <span class="fu">h2</span>(<span class="st">&quot;Análisis Exploratorio de Datos&quot;</span>)</span>
<span id="cb7-7"><a href="vizshiny.html#cb7-7" tabindex="-1"></a>      ),</span>
<span id="cb7-8"><a href="vizshiny.html#cb7-8" tabindex="-1"></a>      </span>
<span id="cb7-9"><a href="vizshiny.html#cb7-9" tabindex="-1"></a>      <span class="co"># Contenido de la Pestaña 2: Entrenamiento</span></span>
<span id="cb7-10"><a href="vizshiny.html#cb7-10" tabindex="-1"></a>      <span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;entrenamiento&quot;</span>,</span>
<span id="cb7-11"><a href="vizshiny.html#cb7-11" tabindex="-1"></a>              <span class="fu">h2</span>(<span class="st">&quot;Entrenamiento de un Modelo Predictivo&quot;</span>)</span>
<span id="cb7-12"><a href="vizshiny.html#cb7-12" tabindex="-1"></a>      ),</span>
<span id="cb7-13"><a href="vizshiny.html#cb7-13" tabindex="-1"></a>      </span>
<span id="cb7-14"><a href="vizshiny.html#cb7-14" tabindex="-1"></a>      <span class="co"># Contenido de la Pestaña 3: Predicciones</span></span>
<span id="cb7-15"><a href="vizshiny.html#cb7-15" tabindex="-1"></a>      <span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;predicciones&quot;</span>,</span>
<span id="cb7-16"><a href="vizshiny.html#cb7-16" tabindex="-1"></a>              <span class="fu">h2</span>(<span class="st">&quot;Realizar una Predicción&quot;</span>)</span>
<span id="cb7-17"><a href="vizshiny.html#cb7-17" tabindex="-1"></a>      )</span>
<span id="cb7-18"><a href="vizshiny.html#cb7-18" tabindex="-1"></a>    )</span>
<span id="cb7-19"><a href="vizshiny.html#cb7-19" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<ol start="5" style="list-style-type: decimal">
<li>Guarda todos tus archivos y haz clic en “Run App”.</li>
</ol>
<details close>
<summary>
👁️ Resultado de esta tarea
</summary>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="vizshiny.html#cb8-1" tabindex="-1"></a><span class="co"># --- Archivo: ui.R ---</span></span>
<span id="cb8-2"><a href="vizshiny.html#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="vizshiny.html#cb8-3" tabindex="-1"></a><span class="fu">library</span>(shinydashboard)</span>
<span id="cb8-4"><a href="vizshiny.html#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="vizshiny.html#cb8-5" tabindex="-1"></a><span class="co"># Define la UI (Interfaz de Usuario)</span></span>
<span id="cb8-6"><a href="vizshiny.html#cb8-6" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">dashboardPage</span>(<span class="at">skin =</span> <span class="st">&quot;purple&quot;</span>,</span>
<span id="cb8-7"><a href="vizshiny.html#cb8-7" tabindex="-1"></a>  </span>
<span id="cb8-8"><a href="vizshiny.html#cb8-8" tabindex="-1"></a>  <span class="co"># 1. Cabecera del Dashboard</span></span>
<span id="cb8-9"><a href="vizshiny.html#cb8-9" tabindex="-1"></a>  <span class="fu">dashboardHeader</span>(</span>
<span id="cb8-10"><a href="vizshiny.html#cb8-10" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">tagList</span>(</span>
<span id="cb8-11"><a href="vizshiny.html#cb8-11" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">img</span>(<span class="at">src =</span> <span class="st">&#39;mi_logo.png&#39;</span>, <span class="at">height =</span> <span class="st">&#39;45&#39;</span>, <span class="at">style =</span> <span class="st">&quot;padding-right:10px;&quot;</span>),</span>
<span id="cb8-12"><a href="vizshiny.html#cb8-12" tabindex="-1"></a>      <span class="st">&quot;Análisis de Enfermedades Cardíacas&quot;</span></span>
<span id="cb8-13"><a href="vizshiny.html#cb8-13" tabindex="-1"></a>    ),</span>
<span id="cb8-14"><a href="vizshiny.html#cb8-14" tabindex="-1"></a>    <span class="at">titleWidth =</span> <span class="dv">450</span></span>
<span id="cb8-15"><a href="vizshiny.html#cb8-15" tabindex="-1"></a>  ),</span>
<span id="cb8-16"><a href="vizshiny.html#cb8-16" tabindex="-1"></a>  </span>
<span id="cb8-17"><a href="vizshiny.html#cb8-17" tabindex="-1"></a>  <span class="co"># 2. Barra Lateral de Navegación</span></span>
<span id="cb8-18"><a href="vizshiny.html#cb8-18" tabindex="-1"></a>  <span class="fu">dashboardSidebar</span>(</span>
<span id="cb8-19"><a href="vizshiny.html#cb8-19" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">450</span>,</span>
<span id="cb8-20"><a href="vizshiny.html#cb8-20" tabindex="-1"></a>    <span class="fu">sidebarMenu</span>(</span>
<span id="cb8-21"><a href="vizshiny.html#cb8-21" tabindex="-1"></a>      <span class="fu">menuItem</span>(<span class="st">&quot;Análisis Exploratorio&quot;</span>, <span class="at">tabName =</span> <span class="st">&quot;eda&quot;</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;chart-bar&quot;</span>)),</span>
<span id="cb8-22"><a href="vizshiny.html#cb8-22" tabindex="-1"></a>      <span class="fu">menuItem</span>(<span class="st">&quot;Entrenamiento del Modelo&quot;</span>, <span class="at">tabName =</span> <span class="st">&quot;entrenamiento&quot;</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;gears&quot;</span>)),</span>
<span id="cb8-23"><a href="vizshiny.html#cb8-23" tabindex="-1"></a>      <span class="fu">menuItem</span>(<span class="st">&quot;Predicciones&quot;</span>, <span class="at">tabName =</span> <span class="st">&quot;predicciones&quot;</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;laptop&quot;</span>))</span>
<span id="cb8-24"><a href="vizshiny.html#cb8-24" tabindex="-1"></a>    )</span>
<span id="cb8-25"><a href="vizshiny.html#cb8-25" tabindex="-1"></a>  ),</span>
<span id="cb8-26"><a href="vizshiny.html#cb8-26" tabindex="-1"></a>  </span>
<span id="cb8-27"><a href="vizshiny.html#cb8-27" tabindex="-1"></a>  <span class="co"># 3. Cuerpo del Dashboard</span></span>
<span id="cb8-28"><a href="vizshiny.html#cb8-28" tabindex="-1"></a>  <span class="fu">dashboardBody</span>(</span>
<span id="cb8-29"><a href="vizshiny.html#cb8-29" tabindex="-1"></a>    <span class="fu">tabItems</span>(</span>
<span id="cb8-30"><a href="vizshiny.html#cb8-30" tabindex="-1"></a>      <span class="co"># Contenido de la Pestaña 1: Análisis Exploratorio</span></span>
<span id="cb8-31"><a href="vizshiny.html#cb8-31" tabindex="-1"></a>      <span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;eda&quot;</span>,</span>
<span id="cb8-32"><a href="vizshiny.html#cb8-32" tabindex="-1"></a>              <span class="fu">h2</span>(<span class="st">&quot;Análisis Exploratorio de Datos&quot;</span>)</span>
<span id="cb8-33"><a href="vizshiny.html#cb8-33" tabindex="-1"></a>      ),</span>
<span id="cb8-34"><a href="vizshiny.html#cb8-34" tabindex="-1"></a>      </span>
<span id="cb8-35"><a href="vizshiny.html#cb8-35" tabindex="-1"></a>      <span class="co"># Contenido de la Pestaña 2: Entrenamiento</span></span>
<span id="cb8-36"><a href="vizshiny.html#cb8-36" tabindex="-1"></a>      <span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;entrenamiento&quot;</span>,</span>
<span id="cb8-37"><a href="vizshiny.html#cb8-37" tabindex="-1"></a>              <span class="fu">h2</span>(<span class="st">&quot;Entrenamiento de un Modelo Predictivo&quot;</span>)</span>
<span id="cb8-38"><a href="vizshiny.html#cb8-38" tabindex="-1"></a>      ),</span>
<span id="cb8-39"><a href="vizshiny.html#cb8-39" tabindex="-1"></a>      </span>
<span id="cb8-40"><a href="vizshiny.html#cb8-40" tabindex="-1"></a>      <span class="co"># Contenido de la Pestaña 3: Predicciones</span></span>
<span id="cb8-41"><a href="vizshiny.html#cb8-41" tabindex="-1"></a>      <span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;predicciones&quot;</span>,</span>
<span id="cb8-42"><a href="vizshiny.html#cb8-42" tabindex="-1"></a>              <span class="fu">h2</span>(<span class="st">&quot;Realizar una Predicción&quot;</span>)</span>
<span id="cb8-43"><a href="vizshiny.html#cb8-43" tabindex="-1"></a>      )</span>
<span id="cb8-44"><a href="vizshiny.html#cb8-44" tabindex="-1"></a>    )</span>
<span id="cb8-45"><a href="vizshiny.html#cb8-45" tabindex="-1"></a>  )</span>
<span id="cb8-46"><a href="vizshiny.html#cb8-46" tabindex="-1"></a>)</span></code></pre></div>
</details>
</details>
<p>Por ahora el archivo <code>server.R</code> sigue vacio.</p>
</div>
<div id="tarea-5-definir-la-ui-de-la-exploración-de-datos" class="section level3 hasAnchor" number="7.2.6">
<h3><span class="header-section-number">7.2.6</span> Tarea 5: Definir la ui de la exploración de datos<a href="#tarea-5-definir-la-ui-de-la-exploraci%C3%B3n-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En esta tarea vamos a crear la primera pestaña de la aplicación, la pestaña de <strong>Análisis exploratorio de datos (EDA)</strong>. Al final de este módulo, se tendrán gráficos y tablas que reaccionan instantáneamente a las selecciones del usuario.</p>
<p>Aquí es donde nuestro archivo <code>server.R</code>, hasta ahora vacío, entra en acción.</p>
<p>Ahora se va a definir los elementos que el usuario verá en la pestaña del EDA. Los elementos principales para organizar el contendio serán <code>box()</code>, para organizar la información en cajas, y <code>fluidRow()</code> para organizar la información en filas.</p>
<p>En la pestaña de EDA, organizamos la interfaz en tres filas principales (fluidRow). Cada una tiene un propósito específico:</p>
<ol style="list-style-type: decimal">
<li><strong>Primera fluidRow: La fila de resumen (con los valueBox)</strong></li>
</ol>
<p>Esta será la fila superior que contiene las cuatro cajas de colores con los números clave (Observaciones, Variables, etc.). Actúa como un “panel de vitales” para nuestro dataset. Su objetivo es dar al usuario una visión general e instantánea de los datos con los que está trabajando, incluso antes de empezar a explorarlos en detalle.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="vizshiny.html#cb9-1" tabindex="-1"></a><span class="co"># Fila de Cajas con Métricas (Value Boxes)</span></span>
<span id="cb9-2"><a href="vizshiny.html#cb9-2" tabindex="-1"></a><span class="fu">fluidRow</span>(</span>
<span id="cb9-3"><a href="vizshiny.html#cb9-3" tabindex="-1"></a>  <span class="fu">box</span>(</span>
<span id="cb9-4"><a href="vizshiny.html#cb9-4" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">12</span>, </span>
<span id="cb9-5"><a href="vizshiny.html#cb9-5" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Resumen del dataset&quot;</span>, </span>
<span id="cb9-6"><a href="vizshiny.html#cb9-6" tabindex="-1"></a>    <span class="at">status =</span> <span class="st">&quot;primary&quot;</span>, </span>
<span id="cb9-7"><a href="vizshiny.html#cb9-7" tabindex="-1"></a>    <span class="at">solidHeader =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-8"><a href="vizshiny.html#cb9-8" tabindex="-1"></a>    <span class="at">collapsible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-9"><a href="vizshiny.html#cb9-9" tabindex="-1"></a>    <span class="fu">fluidRow</span>(</span>
<span id="cb9-10"><a href="vizshiny.html#cb9-10" tabindex="-1"></a>      <span class="fu">column</span>(<span class="dv">3</span>, <span class="fu">valueBox</span>(<span class="fu">nrow</span>(df), <span class="st">&quot;Observaciones&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">color=</span><span class="st">&quot;navy&quot;</span>)),</span>
<span id="cb9-11"><a href="vizshiny.html#cb9-11" tabindex="-1"></a>      <span class="fu">column</span>(<span class="dv">3</span>, <span class="fu">valueBox</span>(<span class="fu">ncol</span>(df), <span class="st">&quot;Variables&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">color=</span><span class="st">&quot;navy&quot;</span>)),</span>
<span id="cb9-12"><a href="vizshiny.html#cb9-12" tabindex="-1"></a>      <span class="fu">column</span>(<span class="dv">3</span>, <span class="fu">valueBox</span>(<span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">sum</span>(df<span class="sc">$</span>EnfermedadCorazon <span class="sc">==</span> <span class="st">&quot;Sí&quot;</span>) <span class="sc">/</span> <span class="fu">nrow</span>(df) <span class="sc">*</span> <span class="dv">100</span>), <span class="st">&quot;%&quot;</span>), <span class="st">&quot;% con Enfermedad&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">color=</span><span class="st">&quot;navy&quot;</span>)),</span>
<span id="cb9-13"><a href="vizshiny.html#cb9-13" tabindex="-1"></a>      <span class="fu">column</span>(<span class="dv">3</span>, <span class="fu">valueBox</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(df)), <span class="st">&quot;Valores Faltantes&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">color=</span><span class="st">&quot;navy&quot;</span>))</span>
<span id="cb9-14"><a href="vizshiny.html#cb9-14" tabindex="-1"></a>    )</span>
<span id="cb9-15"><a href="vizshiny.html#cb9-15" tabindex="-1"></a>  )</span>
<span id="cb9-16"><a href="vizshiny.html#cb9-16" tabindex="-1"></a>),</span></code></pre></div>
</details>
<ol start="2" style="list-style-type: decimal">
<li><strong>Segunda fluidRow: El centro de mando interactivo</strong></li>
</ol>
<p>Esta es la fila central que contiene la caja de controles a la izquierda (menús desplegables, sliders) y la caja del gráfico a la derecha. Esta es el corazón de la interactividad. A la izquierda, le damos al usuario las “palancas y botones” para hacer preguntas a los datos. A la derecha, le mostramos la respuesta a esas preguntas de forma visual. Es la manifestación más clara de la conexión entre input y output.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="vizshiny.html#cb10-1" tabindex="-1"></a><span class="co"># Fila con Controles y Gráfico</span></span>
<span id="cb10-2"><a href="vizshiny.html#cb10-2" tabindex="-1"></a><span class="fu">fluidRow</span>(</span>
<span id="cb10-3"><a href="vizshiny.html#cb10-3" tabindex="-1"></a>  <span class="co"># Caja de Controles</span></span>
<span id="cb10-4"><a href="vizshiny.html#cb10-4" tabindex="-1"></a>  <span class="fu">box</span>(</span>
<span id="cb10-5"><a href="vizshiny.html#cb10-5" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Configuración de gráficos&quot;</span>, <span class="at">status =</span> <span class="st">&quot;primary&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">4</span>,</span>
<span id="cb10-6"><a href="vizshiny.html#cb10-6" tabindex="-1"></a>    <span class="fu">selectInput</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;Selecciona una variable:&quot;</span>,</span>
<span id="cb10-7"><a href="vizshiny.html#cb10-7" tabindex="-1"></a>                <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb10-8"><a href="vizshiny.html#cb10-8" tabindex="-1"></a>                  <span class="st">&quot;Edad&quot;</span> <span class="ot">=</span> <span class="st">&quot;Age&quot;</span>,</span>
<span id="cb10-9"><a href="vizshiny.html#cb10-9" tabindex="-1"></a>                  <span class="st">&quot;Sexo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Sex&quot;</span>,</span>
<span id="cb10-10"><a href="vizshiny.html#cb10-10" tabindex="-1"></a>                  <span class="st">&quot;Tipo de Dolor de Pecho&quot;</span> <span class="ot">=</span> <span class="st">&quot;ChestPainType&quot;</span>,</span>
<span id="cb10-11"><a href="vizshiny.html#cb10-11" tabindex="-1"></a>                  <span class="st">&quot;Nivel de Colesterol&quot;</span> <span class="ot">=</span> <span class="st">&quot;Cholesterol&quot;</span>,</span>
<span id="cb10-12"><a href="vizshiny.html#cb10-12" tabindex="-1"></a>                  <span class="st">&quot;Frecuencia Cardíaca Máxima&quot;</span> <span class="ot">=</span> <span class="st">&quot;MaxHR&quot;</span></span>
<span id="cb10-13"><a href="vizshiny.html#cb10-13" tabindex="-1"></a>                )</span>
<span id="cb10-14"><a href="vizshiny.html#cb10-14" tabindex="-1"></a>    ),</span>
<span id="cb10-15"><a href="vizshiny.html#cb10-15" tabindex="-1"></a>    <span class="fu">sliderInput</span>(<span class="st">&quot;rango_edad&quot;</span>, <span class="st">&quot;Filtra por Rango de Edad:&quot;</span>,</span>
<span id="cb10-16"><a href="vizshiny.html#cb10-16" tabindex="-1"></a>                <span class="at">min =</span> <span class="fu">min</span>(df<span class="sc">$</span>Age), <span class="at">max =</span> <span class="fu">max</span>(df<span class="sc">$</span>Age), <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">min</span>(df<span class="sc">$</span>Age), <span class="fu">max</span>(df<span class="sc">$</span>Age)))</span>
<span id="cb10-17"><a href="vizshiny.html#cb10-17" tabindex="-1"></a>  ),</span>
<span id="cb10-18"><a href="vizshiny.html#cb10-18" tabindex="-1"></a>  <span class="co"># Caja para el Gráfico</span></span>
<span id="cb10-19"><a href="vizshiny.html#cb10-19" tabindex="-1"></a>  <span class="fu">box</span>(</span>
<span id="cb10-20"><a href="vizshiny.html#cb10-20" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Gráfico Interactivo&quot;</span>, <span class="at">status =</span> <span class="st">&quot;success&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb10-21"><a href="vizshiny.html#cb10-21" tabindex="-1"></a>    <span class="co"># Usamos plotlyOutput para un gráfico interactivo</span></span>
<span id="cb10-22"><a href="vizshiny.html#cb10-22" tabindex="-1"></a>    <span class="fu">plotlyOutput</span>(<span class="st">&quot;distPlot&quot;</span>)</span>
<span id="cb10-23"><a href="vizshiny.html#cb10-23" tabindex="-1"></a>  )</span>
<span id="cb10-24"><a href="vizshiny.html#cb10-24" tabindex="-1"></a>),</span></code></pre></div>
</details>
<ol start="3" style="list-style-type: decimal">
<li><strong>Tercera fluidRow: La vista detallada (con la dataTable)</strong>
Esta es la última fila que contiene la tabla de datos interactiva. Funciona como una “lupa”. Mientras que el gráfico nos da una visión agregada y visual, la tabla nos permite inspeccionar las filas de datos individuales que componen ese gráfico. Permite buscar, ordenar y verificar los datos crudos, ofreciendo un nivel de detalle que el gráfico no puede.</li>
</ol>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="vizshiny.html#cb11-1" tabindex="-1"></a><span class="co"># Fila para la Tabla de Datos</span></span>
<span id="cb11-2"><a href="vizshiny.html#cb11-2" tabindex="-1"></a><span class="fu">fluidRow</span>(</span>
<span id="cb11-3"><a href="vizshiny.html#cb11-3" tabindex="-1"></a>  <span class="fu">box</span>(</span>
<span id="cb11-4"><a href="vizshiny.html#cb11-4" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Tabla de datos&quot;</span>, <span class="at">status =</span> <span class="st">&quot;info&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">12</span>,</span>
<span id="cb11-5"><a href="vizshiny.html#cb11-5" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;tablaDatos&quot;</span>)</span>
<span id="cb11-6"><a href="vizshiny.html#cb11-6" tabindex="-1"></a>  )</span>
<span id="cb11-7"><a href="vizshiny.html#cb11-7" tabindex="-1"></a>)</span></code></pre></div>
</details>
<details close>
<summary>
👁️ Resultado de esta tarea
</summary>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="vizshiny.html#cb12-1" tabindex="-1"></a><span class="co"># Contenido de la Pestaña 1: Análisis Exploratorio</span></span>
<span id="cb12-2"><a href="vizshiny.html#cb12-2" tabindex="-1"></a>      <span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;eda&quot;</span>,</span>
<span id="cb12-3"><a href="vizshiny.html#cb12-3" tabindex="-1"></a>              <span class="fu">h2</span>(<span class="st">&quot;Análisis Exploratorio de Datos&quot;</span>),</span>
<span id="cb12-4"><a href="vizshiny.html#cb12-4" tabindex="-1"></a>              </span>
<span id="cb12-5"><a href="vizshiny.html#cb12-5" tabindex="-1"></a>              <span class="co"># Fila de Cajas con Métricas (Value Boxes)</span></span>
<span id="cb12-6"><a href="vizshiny.html#cb12-6" tabindex="-1"></a>              <span class="fu">fluidRow</span>(</span>
<span id="cb12-7"><a href="vizshiny.html#cb12-7" tabindex="-1"></a>                <span class="fu">box</span>(</span>
<span id="cb12-8"><a href="vizshiny.html#cb12-8" tabindex="-1"></a>                  <span class="at">width =</span> <span class="dv">12</span>, </span>
<span id="cb12-9"><a href="vizshiny.html#cb12-9" tabindex="-1"></a>                  <span class="at">title =</span> <span class="st">&quot;Resumen del Dataset&quot;</span>, </span>
<span id="cb12-10"><a href="vizshiny.html#cb12-10" tabindex="-1"></a>                  <span class="at">status =</span> <span class="st">&quot;primary&quot;</span>, </span>
<span id="cb12-11"><a href="vizshiny.html#cb12-11" tabindex="-1"></a>                  <span class="at">solidHeader =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-12"><a href="vizshiny.html#cb12-12" tabindex="-1"></a>                  <span class="at">collapsible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-13"><a href="vizshiny.html#cb12-13" tabindex="-1"></a>                  <span class="fu">fluidRow</span>(</span>
<span id="cb12-14"><a href="vizshiny.html#cb12-14" tabindex="-1"></a>                    <span class="fu">column</span>(<span class="dv">3</span>, <span class="fu">valueBox</span>(<span class="fu">nrow</span>(df), <span class="st">&quot;Observaciones&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">color=</span><span class="st">&quot;navy&quot;</span>)),</span>
<span id="cb12-15"><a href="vizshiny.html#cb12-15" tabindex="-1"></a>                    <span class="fu">column</span>(<span class="dv">3</span>, <span class="fu">valueBox</span>(<span class="fu">ncol</span>(df), <span class="st">&quot;Variables&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">color=</span><span class="st">&quot;navy&quot;</span>)),</span>
<span id="cb12-16"><a href="vizshiny.html#cb12-16" tabindex="-1"></a>                    <span class="fu">column</span>(<span class="dv">3</span>, <span class="fu">valueBox</span>(<span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">sum</span>(df<span class="sc">$</span>EnfermedadCorazon <span class="sc">==</span> <span class="st">&quot;Sí&quot;</span>) <span class="sc">/</span> <span class="fu">nrow</span>(df) <span class="sc">*</span> <span class="dv">100</span>), <span class="st">&quot;%&quot;</span>), <span class="st">&quot;% con Enfermedad&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">color=</span><span class="st">&quot;navy&quot;</span>)),</span>
<span id="cb12-17"><a href="vizshiny.html#cb12-17" tabindex="-1"></a>                    <span class="fu">column</span>(<span class="dv">3</span>, <span class="fu">valueBox</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(df)), <span class="st">&quot;Valores Faltantes&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">color=</span><span class="st">&quot;navy&quot;</span>))</span>
<span id="cb12-18"><a href="vizshiny.html#cb12-18" tabindex="-1"></a>                  )</span>
<span id="cb12-19"><a href="vizshiny.html#cb12-19" tabindex="-1"></a>                )</span>
<span id="cb12-20"><a href="vizshiny.html#cb12-20" tabindex="-1"></a>              ),</span>
<span id="cb12-21"><a href="vizshiny.html#cb12-21" tabindex="-1"></a>              </span>
<span id="cb12-22"><a href="vizshiny.html#cb12-22" tabindex="-1"></a>              <span class="co"># Fila con Controles y Gráfico</span></span>
<span id="cb12-23"><a href="vizshiny.html#cb12-23" tabindex="-1"></a>              <span class="fu">fluidRow</span>(</span>
<span id="cb12-24"><a href="vizshiny.html#cb12-24" tabindex="-1"></a>                <span class="co"># Caja de Controles</span></span>
<span id="cb12-25"><a href="vizshiny.html#cb12-25" tabindex="-1"></a>                <span class="fu">box</span>(</span>
<span id="cb12-26"><a href="vizshiny.html#cb12-26" tabindex="-1"></a>                  <span class="at">title =</span> <span class="st">&quot;Configuración de Gráficos&quot;</span>, <span class="at">status =</span> <span class="st">&quot;primary&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">4</span>,</span>
<span id="cb12-27"><a href="vizshiny.html#cb12-27" tabindex="-1"></a>                  <span class="fu">selectInput</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;Selecciona una variable:&quot;</span>,</span>
<span id="cb12-28"><a href="vizshiny.html#cb12-28" tabindex="-1"></a>                              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb12-29"><a href="vizshiny.html#cb12-29" tabindex="-1"></a>                                <span class="st">&quot;Edad&quot;</span> <span class="ot">=</span> <span class="st">&quot;Age&quot;</span>,</span>
<span id="cb12-30"><a href="vizshiny.html#cb12-30" tabindex="-1"></a>                                <span class="st">&quot;Sexo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Sex&quot;</span>,</span>
<span id="cb12-31"><a href="vizshiny.html#cb12-31" tabindex="-1"></a>                                <span class="st">&quot;Tipo de Dolor de Pecho&quot;</span> <span class="ot">=</span> <span class="st">&quot;ChestPainType&quot;</span>,</span>
<span id="cb12-32"><a href="vizshiny.html#cb12-32" tabindex="-1"></a>                                <span class="st">&quot;Nivel de Colesterol&quot;</span> <span class="ot">=</span> <span class="st">&quot;Cholesterol&quot;</span>,</span>
<span id="cb12-33"><a href="vizshiny.html#cb12-33" tabindex="-1"></a>                                <span class="st">&quot;Frecuencia Cardíaca Máxima&quot;</span> <span class="ot">=</span> <span class="st">&quot;MaxHR&quot;</span></span>
<span id="cb12-34"><a href="vizshiny.html#cb12-34" tabindex="-1"></a>                              )</span>
<span id="cb12-35"><a href="vizshiny.html#cb12-35" tabindex="-1"></a>                  ),</span>
<span id="cb12-36"><a href="vizshiny.html#cb12-36" tabindex="-1"></a>                  <span class="fu">sliderInput</span>(<span class="st">&quot;rango_edad&quot;</span>, <span class="st">&quot;Filtra por Rango de Edad:&quot;</span>,</span>
<span id="cb12-37"><a href="vizshiny.html#cb12-37" tabindex="-1"></a>                              <span class="at">min =</span> <span class="fu">min</span>(df<span class="sc">$</span>Age), <span class="at">max =</span> <span class="fu">max</span>(df<span class="sc">$</span>Age), <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">min</span>(df<span class="sc">$</span>Age), <span class="fu">max</span>(df<span class="sc">$</span>Age)))</span>
<span id="cb12-38"><a href="vizshiny.html#cb12-38" tabindex="-1"></a>                ),</span>
<span id="cb12-39"><a href="vizshiny.html#cb12-39" tabindex="-1"></a>                <span class="co"># Caja para el Gráfico</span></span>
<span id="cb12-40"><a href="vizshiny.html#cb12-40" tabindex="-1"></a>                <span class="fu">box</span>(</span>
<span id="cb12-41"><a href="vizshiny.html#cb12-41" tabindex="-1"></a>                  <span class="at">title =</span> <span class="st">&quot;Gráfico Interactivo&quot;</span>, <span class="at">status =</span> <span class="st">&quot;success&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb12-42"><a href="vizshiny.html#cb12-42" tabindex="-1"></a>                  <span class="co"># Usamos plotlyOutput para un gráfico interactivo</span></span>
<span id="cb12-43"><a href="vizshiny.html#cb12-43" tabindex="-1"></a>                  <span class="fu">plotlyOutput</span>(<span class="st">&quot;distPlot&quot;</span>)</span>
<span id="cb12-44"><a href="vizshiny.html#cb12-44" tabindex="-1"></a>                )</span>
<span id="cb12-45"><a href="vizshiny.html#cb12-45" tabindex="-1"></a>              ),</span>
<span id="cb12-46"><a href="vizshiny.html#cb12-46" tabindex="-1"></a></span>
<span id="cb12-47"><a href="vizshiny.html#cb12-47" tabindex="-1"></a>              <span class="co"># Fila para la Tabla de Datos</span></span>
<span id="cb12-48"><a href="vizshiny.html#cb12-48" tabindex="-1"></a>              <span class="fu">fluidRow</span>(</span>
<span id="cb12-49"><a href="vizshiny.html#cb12-49" tabindex="-1"></a>                <span class="fu">box</span>(</span>
<span id="cb12-50"><a href="vizshiny.html#cb12-50" tabindex="-1"></a>                  <span class="at">title =</span> <span class="st">&quot;Tabla de Datos&quot;</span>, <span class="at">status =</span> <span class="st">&quot;info&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">12</span>,</span>
<span id="cb12-51"><a href="vizshiny.html#cb12-51" tabindex="-1"></a>                  DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;tablaDatos&quot;</span>)</span>
<span id="cb12-52"><a href="vizshiny.html#cb12-52" tabindex="-1"></a>                )</span>
<span id="cb12-53"><a href="vizshiny.html#cb12-53" tabindex="-1"></a>              )</span>
<span id="cb12-54"><a href="vizshiny.html#cb12-54" tabindex="-1"></a>      ),</span></code></pre></div>
</details>
</details>
</div>
<div id="tarea-6-lógica-del-server-para-la-exploración-de-datos" class="section level3 hasAnchor" number="7.2.7">
<h3><span class="header-section-number">7.2.7</span> Tarea 6: Lógica del server para la exploración de datos<a href="#tarea-6-l%C3%B3gica-del-server-para-la-exploraci%C3%B3n-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En esta tarea, usaremos el archivo <code>server.R</code> para indicarle a shiny como debe reaccionar la aplicación antes los cambios en los <code>selectInput</code> y <code>sliderInput</code> creados en la interfaz de usuario.</p>
<p>Inicialmente debes asegurarnos que nuestro archivo <code>server.R</code> tenga la siguiente estructura basica:</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="vizshiny.html#cb13-1" tabindex="-1"></a><span class="co"># Define el servidor (lógica del back-end)</span></span>
<span id="cb13-2"><a href="vizshiny.html#cb13-2" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb13-3"><a href="vizshiny.html#cb13-3" tabindex="-1"></a>  </span>
<span id="cb13-4"><a href="vizshiny.html#cb13-4" tabindex="-1"></a>  </span>
<span id="cb13-5"><a href="vizshiny.html#cb13-5" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p>En esta parte vamos a implementar los tres elementos principales de nuestra pestaña de EDA:</p>
<ol style="list-style-type: decimal">
<li>El filtro reactivo: <code>datos_filtrados &lt;- reactive({...})</code></li>
</ol>
<p>Es una expresión reactiva cuya única misión es observar el slider de edad (<code>input$rango_edad</code>). En cuanto el usuario mueve el slider, esta expresión se re-ejecuta, filtra el dataframe original y produce una nueva versión actualizada. Es la fuente central de datos para todos los demás elementos de la pestaña, lo que hace el código muy eficiente.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="vizshiny.html#cb14-1" tabindex="-1"></a>  <span class="co"># 1. Creamos un set de datos reactivo que se filtra por el rango de edad</span></span>
<span id="cb14-2"><a href="vizshiny.html#cb14-2" tabindex="-1"></a>  datos_filtrados <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb14-3"><a href="vizshiny.html#cb14-3" tabindex="-1"></a>    df <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="vizshiny.html#cb14-4" tabindex="-1"></a>      <span class="fu">filter</span>(Age <span class="sc">&gt;=</span> input<span class="sc">$</span>rango_edad[<span class="dv">1</span>] <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span> input<span class="sc">$</span>rango_edad[<span class="dv">2</span>])</span>
<span id="cb14-5"><a href="vizshiny.html#cb14-5" tabindex="-1"></a>  })</span></code></pre></div>
</details>
<ol start="2" style="list-style-type: decimal">
<li>El graficador: <code>output$distPlot &lt;- renderPlotly({...})</code></li>
</ol>
<p>Esta es la función que renderiza (dibuja) el gráfico. Este bloque escucha dos cosas: al filtro reactivo (datos_filtrados) y las instrucciones del usuario sobre qué variable dibujar (<code>input$variable</code>). Cuando cualquiera de los dos cambia, el graficador toma los nuevos datos y las nuevas instrucciones, dibuja un ggplot, y se lo pasa a <code>ggplotly</code> para que le añada la interactividad antes de enviarlo a la interfaz de usuario.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="vizshiny.html#cb15-1" tabindex="-1"></a><span class="co"># 2. Creamos el gráfico de distribución</span></span>
<span id="cb15-2"><a href="vizshiny.html#cb15-2" tabindex="-1"></a>output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb15-3"><a href="vizshiny.html#cb15-3" tabindex="-1"></a>  variable_seleccionada <span class="ot">&lt;-</span> input<span class="sc">$</span>variable</span>
<span id="cb15-4"><a href="vizshiny.html#cb15-4" tabindex="-1"></a>  </span>
<span id="cb15-5"><a href="vizshiny.html#cb15-5" tabindex="-1"></a>  <span class="co"># Si la variable es categórica (factor), crea un gráfico de barras</span></span>
<span id="cb15-6"><a href="vizshiny.html#cb15-6" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.factor</span>(<span class="fu">datos_filtrados</span>()[[variable_seleccionada]])) {</span>
<span id="cb15-7"><a href="vizshiny.html#cb15-7" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">datos_filtrados</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="vizshiny.html#cb15-8" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[variable_seleccionada]], <span class="at">fill =</span> EnfermedadCorazon)) <span class="sc">+</span></span>
<span id="cb15-9"><a href="vizshiny.html#cb15-9" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-10"><a href="vizshiny.html#cb15-10" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Proporción&quot;</span>, <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Proporción de Enfermedad Cardíaca por&quot;</span>, variable_seleccionada)) <span class="sc">+</span></span>
<span id="cb15-11"><a href="vizshiny.html#cb15-11" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb15-12"><a href="vizshiny.html#cb15-12" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb15-13"><a href="vizshiny.html#cb15-13" tabindex="-1"></a>    <span class="co"># Si es numérica, crea un histograma</span></span>
<span id="cb15-14"><a href="vizshiny.html#cb15-14" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">datos_filtrados</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-15"><a href="vizshiny.html#cb15-15" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[variable_seleccionada]], <span class="at">fill =</span> EnfermedadCorazon)) <span class="sc">+</span></span>
<span id="cb15-16"><a href="vizshiny.html#cb15-16" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-17"><a href="vizshiny.html#cb15-17" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Distribución de&quot;</span>, variable_seleccionada)) <span class="sc">+</span></span>
<span id="cb15-18"><a href="vizshiny.html#cb15-18" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb15-19"><a href="vizshiny.html#cb15-19" tabindex="-1"></a>  }</span>
<span id="cb15-20"><a href="vizshiny.html#cb15-20" tabindex="-1"></a>  </span>
<span id="cb15-21"><a href="vizshiny.html#cb15-21" tabindex="-1"></a>  <span class="co"># Convierte el gráfico ggplot a plotly para hacerlo interactivo</span></span>
<span id="cb15-22"><a href="vizshiny.html#cb15-22" tabindex="-1"></a>  <span class="fu">ggplotly</span>(p)</span>
<span id="cb15-23"><a href="vizshiny.html#cb15-23" tabindex="-1"></a>})</span></code></pre></div>
</details>
<ol start="3" style="list-style-type: decimal">
<li>El organizador de datos: <code>output$tablaDatos &lt;- DT::renderDataTable({...})</code></li>
</ol>
<p>Esta es la función que renderiza la tabla de datos. El proposito de este bloque es ser el “organizador”. Su trabajo es más simple: solo escucha a la “expresión reactiva” (datos_filtrados). Cuando los datos filtrados cambian, este bloque los toma, selecciona las columnas más importantes para mantener la tabla limpia, y la presenta en un formato interactivo, con paginación y opción de búsqueda, en la interfaz de usuario.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="vizshiny.html#cb16-1" tabindex="-1"></a>  <span class="co"># 3. Creamos la tabla de datos</span></span>
<span id="cb16-2"><a href="vizshiny.html#cb16-2" tabindex="-1"></a>  output<span class="sc">$</span>tablaDatos <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb16-3"><a href="vizshiny.html#cb16-3" tabindex="-1"></a>    <span class="fu">datos_filtrados</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="vizshiny.html#cb16-4" tabindex="-1"></a>      <span class="fu">select</span>(Age, Sex, ChestPainType, Cholesterol, EnfermedadCorazon)</span>
<span id="cb16-5"><a href="vizshiny.html#cb16-5" tabindex="-1"></a>  }, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>))</span></code></pre></div>
</details>
<details close>
<summary>
👁️ Resultado de esta tarea
</summary>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="vizshiny.html#cb17-1" tabindex="-1"></a><span class="co"># --- Archivo: server.R ---</span></span>
<span id="cb17-2"><a href="vizshiny.html#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="vizshiny.html#cb17-3" tabindex="-1"></a><span class="co"># Define el servidor (lógica del back-end)</span></span>
<span id="cb17-4"><a href="vizshiny.html#cb17-4" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb17-5"><a href="vizshiny.html#cb17-5" tabindex="-1"></a>  </span>
<span id="cb17-6"><a href="vizshiny.html#cb17-6" tabindex="-1"></a>  <span class="co"># --- Pestaña 1: Lógica del Análisis Exploratorio ---</span></span>
<span id="cb17-7"><a href="vizshiny.html#cb17-7" tabindex="-1"></a>  </span>
<span id="cb17-8"><a href="vizshiny.html#cb17-8" tabindex="-1"></a>  <span class="co"># 1. Creamos un set de datos reactivo que se filtra por el rango de edad</span></span>
<span id="cb17-9"><a href="vizshiny.html#cb17-9" tabindex="-1"></a>  datos_filtrados <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb17-10"><a href="vizshiny.html#cb17-10" tabindex="-1"></a>    df <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="vizshiny.html#cb17-11" tabindex="-1"></a>      <span class="fu">filter</span>(Age <span class="sc">&gt;=</span> input<span class="sc">$</span>rango_edad[<span class="dv">1</span>] <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span> input<span class="sc">$</span>rango_edad[<span class="dv">2</span>])</span>
<span id="cb17-12"><a href="vizshiny.html#cb17-12" tabindex="-1"></a>  })</span>
<span id="cb17-13"><a href="vizshiny.html#cb17-13" tabindex="-1"></a>  </span>
<span id="cb17-14"><a href="vizshiny.html#cb17-14" tabindex="-1"></a>  <span class="co"># 2. Creamos el gráfico de distribución</span></span>
<span id="cb17-15"><a href="vizshiny.html#cb17-15" tabindex="-1"></a>  output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb17-16"><a href="vizshiny.html#cb17-16" tabindex="-1"></a>    variable_seleccionada <span class="ot">&lt;-</span> input<span class="sc">$</span>variable</span>
<span id="cb17-17"><a href="vizshiny.html#cb17-17" tabindex="-1"></a>    </span>
<span id="cb17-18"><a href="vizshiny.html#cb17-18" tabindex="-1"></a>    <span class="co"># Si la variable es categórica (factor), crea un gráfico de barras</span></span>
<span id="cb17-19"><a href="vizshiny.html#cb17-19" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.factor</span>(<span class="fu">datos_filtrados</span>()[[variable_seleccionada]])) {</span>
<span id="cb17-20"><a href="vizshiny.html#cb17-20" tabindex="-1"></a>      p <span class="ot">&lt;-</span> <span class="fu">datos_filtrados</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-21"><a href="vizshiny.html#cb17-21" tabindex="-1"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[variable_seleccionada]], <span class="at">fill =</span> EnfermedadCorazon)) <span class="sc">+</span></span>
<span id="cb17-22"><a href="vizshiny.html#cb17-22" tabindex="-1"></a>        <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-23"><a href="vizshiny.html#cb17-23" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Proporción&quot;</span>, <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Proporción de Enfermedad Cardíaca por&quot;</span>, variable_seleccionada)) <span class="sc">+</span></span>
<span id="cb17-24"><a href="vizshiny.html#cb17-24" tabindex="-1"></a>        <span class="fu">theme_minimal</span>()</span>
<span id="cb17-25"><a href="vizshiny.html#cb17-25" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb17-26"><a href="vizshiny.html#cb17-26" tabindex="-1"></a>      <span class="co"># Si es numérica, crea un histograma</span></span>
<span id="cb17-27"><a href="vizshiny.html#cb17-27" tabindex="-1"></a>      p <span class="ot">&lt;-</span> <span class="fu">datos_filtrados</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-28"><a href="vizshiny.html#cb17-28" tabindex="-1"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[variable_seleccionada]], <span class="at">fill =</span> EnfermedadCorazon)) <span class="sc">+</span></span>
<span id="cb17-29"><a href="vizshiny.html#cb17-29" tabindex="-1"></a>        <span class="fu">geom_histogram</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-30"><a href="vizshiny.html#cb17-30" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Distribución de&quot;</span>, variable_seleccionada)) <span class="sc">+</span></span>
<span id="cb17-31"><a href="vizshiny.html#cb17-31" tabindex="-1"></a>        <span class="fu">theme_minimal</span>()</span>
<span id="cb17-32"><a href="vizshiny.html#cb17-32" tabindex="-1"></a>    }</span>
<span id="cb17-33"><a href="vizshiny.html#cb17-33" tabindex="-1"></a>    </span>
<span id="cb17-34"><a href="vizshiny.html#cb17-34" tabindex="-1"></a>    <span class="co"># Convierte el gráfico ggplot a plotly para hacerlo interactivo</span></span>
<span id="cb17-35"><a href="vizshiny.html#cb17-35" tabindex="-1"></a>    <span class="fu">ggplotly</span>(p)</span>
<span id="cb17-36"><a href="vizshiny.html#cb17-36" tabindex="-1"></a>  })</span>
<span id="cb17-37"><a href="vizshiny.html#cb17-37" tabindex="-1"></a>  </span>
<span id="cb17-38"><a href="vizshiny.html#cb17-38" tabindex="-1"></a>  <span class="co"># 3. Creamos la tabla de datos</span></span>
<span id="cb17-39"><a href="vizshiny.html#cb17-39" tabindex="-1"></a>  output<span class="sc">$</span>tablaDatos <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb17-40"><a href="vizshiny.html#cb17-40" tabindex="-1"></a>    <span class="fu">datos_filtrados</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-41"><a href="vizshiny.html#cb17-41" tabindex="-1"></a>      <span class="fu">select</span>(Age, Sex, ChestPainType, Cholesterol, EnfermedadCorazon)</span>
<span id="cb17-42"><a href="vizshiny.html#cb17-42" tabindex="-1"></a>  }, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>))</span>
<span id="cb17-43"><a href="vizshiny.html#cb17-43" tabindex="-1"></a>  </span>
<span id="cb17-44"><a href="vizshiny.html#cb17-44" tabindex="-1"></a>}</span></code></pre></div>
</details>
</details>
<p>Guarda ambos archivos (<code>ui.R</code> y <code>server.R</code>) y ejecuta la aplicación.</p>
</div>
<div id="tarea-7-la-interfaz-del-entrenador-en-ui.r" class="section level3 hasAnchor" number="7.2.8">
<h3><span class="header-section-number">7.2.8</span> Tarea 7: La interfaz del entrenador en ui.R<a href="vizshiny.html#tarea-7-la-interfaz-del-entrenador-en-ui.r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En este módulo, construiremos la pestaña de “Entrenamiento del Modelo”. El usuario podrá elegir un algoritmo, decidir cómo dividir los datos y, con un solo clic, entrenar un modelo y ver su rendimiento a través de métricas y gráficos avanzados.</p>
<p>En esta tarea vamos diseñar la interfaz de esta pestaña. Necesitaremos una caja para los controles (el tipo de modelo, el porcentaje de división) y una caja más grande para mostrar los resultados (métricas, matriz de confusión y curva ROC).</p>
<details close>
<summary>
👁️ Resultado de esta tarea
</summary>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="vizshiny.html#cb18-1" tabindex="-1"></a><span class="co"># Contenido de la Pestaña 2: Entrenamiento</span></span>
<span id="cb18-2"><a href="vizshiny.html#cb18-2" tabindex="-1"></a>      <span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;entrenamiento&quot;</span>,</span>
<span id="cb18-3"><a href="vizshiny.html#cb18-3" tabindex="-1"></a>              <span class="fu">h2</span>(<span class="st">&quot;Entrenamiento de un Modelo Predictivo&quot;</span>),</span>
<span id="cb18-4"><a href="vizshiny.html#cb18-4" tabindex="-1"></a>              <span class="fu">fluidRow</span>(</span>
<span id="cb18-5"><a href="vizshiny.html#cb18-5" tabindex="-1"></a>                <span class="co"># Caja de Controles de Entrenamiento</span></span>
<span id="cb18-6"><a href="vizshiny.html#cb18-6" tabindex="-1"></a>                <span class="fu">box</span>(</span>
<span id="cb18-7"><a href="vizshiny.html#cb18-7" tabindex="-1"></a>                  <span class="at">title =</span> <span class="st">&quot;Control de Entrenamiento&quot;</span>, <span class="at">status =</span> <span class="st">&quot;primary&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">4</span>,</span>
<span id="cb18-8"><a href="vizshiny.html#cb18-8" tabindex="-1"></a>                  </span>
<span id="cb18-9"><a href="vizshiny.html#cb18-9" tabindex="-1"></a>                  <span class="fu">selectInput</span>(<span class="st">&quot;modelo_seleccionado&quot;</span>, <span class="st">&quot;Selecciona un Modelo:&quot;</span>,</span>
<span id="cb18-10"><a href="vizshiny.html#cb18-10" tabindex="-1"></a>                              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb18-11"><a href="vizshiny.html#cb18-11" tabindex="-1"></a>                                <span class="st">&quot;Regresión Logística&quot;</span> <span class="ot">=</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb18-12"><a href="vizshiny.html#cb18-12" tabindex="-1"></a>                                <span class="st">&quot;Bosque Aleatorio (Random Forest)&quot;</span> <span class="ot">=</span> <span class="st">&quot;rf&quot;</span></span>
<span id="cb18-13"><a href="vizshiny.html#cb18-13" tabindex="-1"></a>                              )),</span>
<span id="cb18-14"><a href="vizshiny.html#cb18-14" tabindex="-1"></a>                  </span>
<span id="cb18-15"><a href="vizshiny.html#cb18-15" tabindex="-1"></a>                  <span class="fu">sliderInput</span>(<span class="st">&quot;train_split_percentage&quot;</span>, </span>
<span id="cb18-16"><a href="vizshiny.html#cb18-16" tabindex="-1"></a>                              <span class="st">&quot;Porcentaje de Datos para Entrenamiento:&quot;</span>,</span>
<span id="cb18-17"><a href="vizshiny.html#cb18-17" tabindex="-1"></a>                              <span class="at">min =</span> <span class="dv">50</span>, <span class="at">max =</span> <span class="dv">90</span>, <span class="at">value =</span> <span class="dv">80</span>, <span class="at">step =</span> <span class="dv">5</span>, <span class="at">post =</span> <span class="st">&quot;%&quot;</span>),</span>
<span id="cb18-18"><a href="vizshiny.html#cb18-18" tabindex="-1"></a>                  </span>
<span id="cb18-19"><a href="vizshiny.html#cb18-19" tabindex="-1"></a>                  <span class="co"># El botón que inicia todo el proceso</span></span>
<span id="cb18-20"><a href="vizshiny.html#cb18-20" tabindex="-1"></a>                  <span class="fu">actionButton</span>(<span class="st">&quot;entrenarModelo&quot;</span>, <span class="st">&quot;Entrenar Modelo&quot;</span>, <span class="at">class =</span> <span class="st">&quot;btn-success&quot;</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;play&quot;</span>)),</span>
<span id="cb18-21"><a href="vizshiny.html#cb18-21" tabindex="-1"></a>                  </span>
<span id="cb18-22"><a href="vizshiny.html#cb18-22" tabindex="-1"></a>                  <span class="fu">helpText</span>(<span class="st">&quot;Presiona el botón para entrenar el modelo seleccionado y ver sus métricas de rendimiento.&quot;</span>)</span>
<span id="cb18-23"><a href="vizshiny.html#cb18-23" tabindex="-1"></a>                ),</span>
<span id="cb18-24"><a href="vizshiny.html#cb18-24" tabindex="-1"></a>                </span>
<span id="cb18-25"><a href="vizshiny.html#cb18-25" tabindex="-1"></a>                <span class="co"># Caja para mostrar los Resultados del Modelo</span></span>
<span id="cb18-26"><a href="vizshiny.html#cb18-26" tabindex="-1"></a>                <span class="fu">box</span>(</span>
<span id="cb18-27"><a href="vizshiny.html#cb18-27" tabindex="-1"></a>                  <span class="at">title =</span> <span class="st">&quot;Resultados del Modelo&quot;</span>, <span class="at">status =</span> <span class="st">&quot;info&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">collapsible =</span> <span class="cn">TRUE</span>,</span>
<span id="cb18-28"><a href="vizshiny.html#cb18-28" tabindex="-1"></a>                  </span>
<span id="cb18-29"><a href="vizshiny.html#cb18-29" tabindex="-1"></a>                  <span class="fu">fluidRow</span>(</span>
<span id="cb18-30"><a href="vizshiny.html#cb18-30" tabindex="-1"></a>                    <span class="fu">column</span>(<span class="at">width =</span> <span class="dv">12</span>,</span>
<span id="cb18-31"><a href="vizshiny.html#cb18-31" tabindex="-1"></a>                           <span class="fu">h4</span>(<span class="st">&quot;Métricas Principales&quot;</span>),</span>
<span id="cb18-32"><a href="vizshiny.html#cb18-32" tabindex="-1"></a>                           <span class="fu">verbatimTextOutput</span>(<span class="st">&quot;metricas_modelo&quot;</span>)</span>
<span id="cb18-33"><a href="vizshiny.html#cb18-33" tabindex="-1"></a>                    )</span>
<span id="cb18-34"><a href="vizshiny.html#cb18-34" tabindex="-1"></a>                  ),</span>
<span id="cb18-35"><a href="vizshiny.html#cb18-35" tabindex="-1"></a>                  <span class="fu">fluidRow</span>(</span>
<span id="cb18-36"><a href="vizshiny.html#cb18-36" tabindex="-1"></a>                    <span class="fu">column</span>(<span class="at">width =</span> <span class="dv">6</span>,</span>
<span id="cb18-37"><a href="vizshiny.html#cb18-37" tabindex="-1"></a>                           <span class="fu">h4</span>(<span class="st">&quot;Matriz de Confusión&quot;</span>),</span>
<span id="cb18-38"><a href="vizshiny.html#cb18-38" tabindex="-1"></a>                           <span class="fu">plotlyOutput</span>(<span class="st">&quot;heatmap_confusion&quot;</span>)</span>
<span id="cb18-39"><a href="vizshiny.html#cb18-39" tabindex="-1"></a>                    ),</span>
<span id="cb18-40"><a href="vizshiny.html#cb18-40" tabindex="-1"></a>                    <span class="fu">column</span>(<span class="at">width =</span> <span class="dv">6</span>,</span>
<span id="cb18-41"><a href="vizshiny.html#cb18-41" tabindex="-1"></a>                           <span class="fu">h4</span>(<span class="st">&quot;Curva ROC&quot;</span>),</span>
<span id="cb18-42"><a href="vizshiny.html#cb18-42" tabindex="-1"></a>                           <span class="fu">plotlyOutput</span>(<span class="st">&quot;curva_roc&quot;</span>)</span>
<span id="cb18-43"><a href="vizshiny.html#cb18-43" tabindex="-1"></a>                    )</span>
<span id="cb18-44"><a href="vizshiny.html#cb18-44" tabindex="-1"></a>                  )</span>
<span id="cb18-45"><a href="vizshiny.html#cb18-45" tabindex="-1"></a>                )</span>
<span id="cb18-46"><a href="vizshiny.html#cb18-46" tabindex="-1"></a>              )</span>
<span id="cb18-47"><a href="vizshiny.html#cb18-47" tabindex="-1"></a>      ),</span></code></pre></div>
</details>
</details>
</div>
<div id="tarea-8-logica-del-server-para-el-entrenamiento" class="section level3 hasAnchor" number="7.2.9">
<h3><span class="header-section-number">7.2.9</span> Tarea 8: Logica del server para el entrenamiento<a href="vizshiny.html#tarea-8-logica-del-server-para-el-entrenamiento" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En esta tarea es donde ocurre la magia del Machine Learning. Usaremos una función especial, <code>observeEvent</code>, para que el código solo se ejecute cuando el usuario haga clic en el botón “Entrenar Modelo”.</p>
<p>Pensemos en el <code>observeEvent</code> como un “guardia” que vigila el botón <code>input$entrenarModelo</code>. El guardia no hace absolutamente nada hasta que se presiona el botón. En ese momento, cobra vida y ejecuta toda la secuencia de comandos que le indiquemos. Mas información sobre <code>observeEvent</code> aqui: <a href="https://shiny.posit.co/r/reference/shiny/0.11/observeevent.html">Link documentación</a></p>
<p><em>Nota:</em> Es importante añadir el <code>reactiveValues(modelo = NULL)</code> al inicio del server para tener un lugar donde guardar el modelo que entrenemos.</p>
<details close>
<summary>
👁️ Resultado de esta tarea
</summary>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="vizshiny.html#cb19-1" tabindex="-1"></a><span class="co"># --- Pestaña 2: Lógica de Entrenamiento del Modelo ---</span></span>
<span id="cb19-2"><a href="vizshiny.html#cb19-2" tabindex="-1"></a>  </span>
<span id="cb19-3"><a href="vizshiny.html#cb19-3" tabindex="-1"></a>  <span class="co"># Usamos reactiveValues para almacenar el modelo entrenado y usarlo en la otra pestaña</span></span>
<span id="cb19-4"><a href="vizshiny.html#cb19-4" tabindex="-1"></a>  valores_reactivos <span class="ot">&lt;-</span> <span class="fu">reactiveValues</span>(<span class="at">modelo =</span> <span class="cn">NULL</span>)</span>
<span id="cb19-5"><a href="vizshiny.html#cb19-5" tabindex="-1"></a>  </span>
<span id="cb19-6"><a href="vizshiny.html#cb19-6" tabindex="-1"></a>  <span class="co"># Este bloque de código se ejecuta SOLO cuando se presiona el botón &quot;entrenarModelo&quot;</span></span>
<span id="cb19-7"><a href="vizshiny.html#cb19-7" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>entrenarModelo, {</span>
<span id="cb19-8"><a href="vizshiny.html#cb19-8" tabindex="-1"></a>    <span class="fu">withProgress</span>(<span class="at">message =</span> <span class="st">&#39;Entrenando modelo...&#39;</span>, <span class="at">detail =</span> <span class="st">&#39;Esto puede tomar un momento...&#39;</span>, {</span>
<span id="cb19-9"><a href="vizshiny.html#cb19-9" tabindex="-1"></a>      </span>
<span id="cb19-10"><a href="vizshiny.html#cb19-10" tabindex="-1"></a>      <span class="co"># 1. Preparación de datos usando el slider de la UI</span></span>
<span id="cb19-11"><a href="vizshiny.html#cb19-11" tabindex="-1"></a>      <span class="fu">set.seed</span>(<span class="dv">42</span>) <span class="co"># Para reproducibilidad</span></span>
<span id="cb19-12"><a href="vizshiny.html#cb19-12" tabindex="-1"></a>      particion <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(df<span class="sc">$</span>EnfermedadCorazon, </span>
<span id="cb19-13"><a href="vizshiny.html#cb19-13" tabindex="-1"></a>                                       <span class="at">p =</span> input<span class="sc">$</span>train_split_percentage <span class="sc">/</span> <span class="dv">100</span>,</span>
<span id="cb19-14"><a href="vizshiny.html#cb19-14" tabindex="-1"></a>                                       <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-15"><a href="vizshiny.html#cb19-15" tabindex="-1"></a>      datos_entrenamiento <span class="ot">&lt;-</span> df[particion, ]</span>
<span id="cb19-16"><a href="vizshiny.html#cb19-16" tabindex="-1"></a>      datos_prueba <span class="ot">&lt;-</span> df[<span class="sc">-</span>particion, ]</span>
<span id="cb19-17"><a href="vizshiny.html#cb19-17" tabindex="-1"></a>      </span>
<span id="cb19-18"><a href="vizshiny.html#cb19-18" tabindex="-1"></a>      <span class="co"># 2. Entrenamiento del modelo seleccionado por el usuario</span></span>
<span id="cb19-19"><a href="vizshiny.html#cb19-19" tabindex="-1"></a>      modelo <span class="ot">&lt;-</span> <span class="fu">train</span>(EnfermedadCorazon <span class="sc">~</span> ., </span>
<span id="cb19-20"><a href="vizshiny.html#cb19-20" tabindex="-1"></a>                      <span class="at">data =</span> datos_entrenamiento, </span>
<span id="cb19-21"><a href="vizshiny.html#cb19-21" tabindex="-1"></a>                      <span class="at">method =</span> input<span class="sc">$</span>modelo_seleccionado, <span class="co"># Usa el input del usuario</span></span>
<span id="cb19-22"><a href="vizshiny.html#cb19-22" tabindex="-1"></a>                      <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">&quot;cv&quot;</span>, <span class="at">number =</span> <span class="dv">5</span>, <span class="at">classProbs =</span> <span class="cn">TRUE</span>, <span class="at">summaryFunction =</span> twoClassSummary),</span>
<span id="cb19-23"><a href="vizshiny.html#cb19-23" tabindex="-1"></a>                      <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>)</span>
<span id="cb19-24"><a href="vizshiny.html#cb19-24" tabindex="-1"></a>      </span>
<span id="cb19-25"><a href="vizshiny.html#cb19-25" tabindex="-1"></a>      <span class="co"># 3. Guardamos el modelo entrenado en nuestros valores_reactivos</span></span>
<span id="cb19-26"><a href="vizshiny.html#cb19-26" tabindex="-1"></a>      valores_reactivos<span class="sc">$</span>modelo <span class="ot">&lt;-</span> modelo</span>
<span id="cb19-27"><a href="vizshiny.html#cb19-27" tabindex="-1"></a>      </span>
<span id="cb19-28"><a href="vizshiny.html#cb19-28" tabindex="-1"></a>      <span class="co"># 4. Generación de predicciones y matriz de confusión para evaluar</span></span>
<span id="cb19-29"><a href="vizshiny.html#cb19-29" tabindex="-1"></a>      predicciones_clase <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo, <span class="at">newdata =</span> datos_prueba)</span>
<span id="cb19-30"><a href="vizshiny.html#cb19-30" tabindex="-1"></a>      matriz_confusion <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(predicciones_clase, datos_prueba<span class="sc">$</span>EnfermedadCorazon, <span class="at">positive =</span> <span class="st">&quot;Sí&quot;</span>)</span>
<span id="cb19-31"><a href="vizshiny.html#cb19-31" tabindex="-1"></a>      </span>
<span id="cb19-32"><a href="vizshiny.html#cb19-32" tabindex="-1"></a>      <span class="co"># --- Creación de las Salidas (Outputs) ---</span></span>
<span id="cb19-33"><a href="vizshiny.html#cb19-33" tabindex="-1"></a>      </span>
<span id="cb19-34"><a href="vizshiny.html#cb19-34" tabindex="-1"></a>      <span class="co"># Salida 1: Métricas principales en texto</span></span>
<span id="cb19-35"><a href="vizshiny.html#cb19-35" tabindex="-1"></a>      output<span class="sc">$</span>metricas_modelo <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="cb19-36"><a href="vizshiny.html#cb19-36" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">&quot;Métricas Generales:</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb19-37"><a href="vizshiny.html#cb19-37" tabindex="-1"></a>        <span class="fu">print</span>(matriz_confusion<span class="sc">$</span>overall[<span class="fu">c</span>(<span class="st">&quot;Accuracy&quot;</span>, <span class="st">&quot;Kappa&quot;</span>)])</span>
<span id="cb19-38"><a href="vizshiny.html#cb19-38" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">Métricas por Clase (Clase Positiva: &#39;Sí&#39;):</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb19-39"><a href="vizshiny.html#cb19-39" tabindex="-1"></a>        <span class="fu">print</span>(matriz_confusion<span class="sc">$</span>byClass[<span class="fu">c</span>(<span class="st">&quot;Sensitivity&quot;</span>, <span class="st">&quot;Specificity&quot;</span>, <span class="st">&quot;Precision&quot;</span>, <span class="st">&quot;Recall&quot;</span>, <span class="st">&quot;F1&quot;</span>)])</span>
<span id="cb19-40"><a href="vizshiny.html#cb19-40" tabindex="-1"></a>      })</span>
<span id="cb19-41"><a href="vizshiny.html#cb19-41" tabindex="-1"></a>      </span>
<span id="cb19-42"><a href="vizshiny.html#cb19-42" tabindex="-1"></a>      <span class="co"># Salida 2: Heatmap interactivo para la Matriz de Confusión</span></span>
<span id="cb19-43"><a href="vizshiny.html#cb19-43" tabindex="-1"></a>      output<span class="sc">$</span>heatmap_confusion <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb19-44"><a href="vizshiny.html#cb19-44" tabindex="-1"></a>        matriz <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(matriz_confusion<span class="sc">$</span>table)</span>
<span id="cb19-45"><a href="vizshiny.html#cb19-45" tabindex="-1"></a>        p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(matriz, <span class="fu">aes</span>(<span class="at">x =</span> Prediction, <span class="at">y =</span> Reference, <span class="at">fill =</span> Freq)) <span class="sc">+</span></span>
<span id="cb19-46"><a href="vizshiny.html#cb19-46" tabindex="-1"></a>          <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb19-47"><a href="vizshiny.html#cb19-47" tabindex="-1"></a>          <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Freq), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb19-48"><a href="vizshiny.html#cb19-48" tabindex="-1"></a>          <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;#5DADE2&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#1B4F72&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-49"><a href="vizshiny.html#cb19-49" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Matriz de Confusión&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Clase Predicha&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Clase Real&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-50"><a href="vizshiny.html#cb19-50" tabindex="-1"></a>          <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-51"><a href="vizshiny.html#cb19-51" tabindex="-1"></a>          <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb19-52"><a href="vizshiny.html#cb19-52" tabindex="-1"></a>        <span class="fu">ggplotly</span>(p)</span>
<span id="cb19-53"><a href="vizshiny.html#cb19-53" tabindex="-1"></a>      })</span>
<span id="cb19-54"><a href="vizshiny.html#cb19-54" tabindex="-1"></a>      </span>
<span id="cb19-55"><a href="vizshiny.html#cb19-55" tabindex="-1"></a>      <span class="co"># Salida 3: Curva ROC interactiva</span></span>
<span id="cb19-56"><a href="vizshiny.html#cb19-56" tabindex="-1"></a>      output<span class="sc">$</span>curva_roc <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb19-57"><a href="vizshiny.html#cb19-57" tabindex="-1"></a>        predicciones_prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo, <span class="at">newdata =</span> datos_prueba, <span class="at">type =</span> <span class="st">&quot;prob&quot;</span>)</span>
<span id="cb19-58"><a href="vizshiny.html#cb19-58" tabindex="-1"></a>        roc_obj <span class="ot">&lt;-</span> <span class="fu">roc</span>(<span class="at">response =</span> datos_prueba<span class="sc">$</span>EnfermedadCorazon, </span>
<span id="cb19-59"><a href="vizshiny.html#cb19-59" tabindex="-1"></a>                       <span class="at">predictor =</span> predicciones_prob<span class="sc">$</span>Sí,</span>
<span id="cb19-60"><a href="vizshiny.html#cb19-60" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Sí&quot;</span>))</span>
<span id="cb19-61"><a href="vizshiny.html#cb19-61" tabindex="-1"></a>        </span>
<span id="cb19-62"><a href="vizshiny.html#cb19-62" tabindex="-1"></a>        p <span class="ot">&lt;-</span> <span class="fu">ggroc</span>(roc_obj, <span class="at">legacy.axes =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb19-63"><a href="vizshiny.html#cb19-63" tabindex="-1"></a>          <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-64"><a href="vizshiny.html#cb19-64" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Curva ROC (AUC =&quot;</span>, <span class="fu">round</span>(<span class="fu">auc</span>(roc_obj), <span class="dv">3</span>), <span class="st">&quot;)&quot;</span>),</span>
<span id="cb19-65"><a href="vizshiny.html#cb19-65" tabindex="-1"></a>               <span class="at">x =</span> <span class="st">&quot;Tasa de Falsos Positivos (1 - Especificidad)&quot;</span>,</span>
<span id="cb19-66"><a href="vizshiny.html#cb19-66" tabindex="-1"></a>               <span class="at">y =</span> <span class="st">&quot;Tasa de Verdaderos Positivos (Sensibilidad)&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-67"><a href="vizshiny.html#cb19-67" tabindex="-1"></a>          <span class="fu">theme_minimal</span>()</span>
<span id="cb19-68"><a href="vizshiny.html#cb19-68" tabindex="-1"></a>        <span class="fu">ggplotly</span>(p)</span>
<span id="cb19-69"><a href="vizshiny.html#cb19-69" tabindex="-1"></a>      })</span>
<span id="cb19-70"><a href="vizshiny.html#cb19-70" tabindex="-1"></a>      </span>
<span id="cb19-71"><a href="vizshiny.html#cb19-71" tabindex="-1"></a>    }) <span class="co"># Fin de withProgress (la barra de progreso)</span></span>
<span id="cb19-72"><a href="vizshiny.html#cb19-72" tabindex="-1"></a>  }) <span class="co"># Fin de observeEvent</span></span></code></pre></div>
</details>
</details>
<p>Guarda ambos archivos (<code>ui.R</code> y <code>server.R</code>) y ejecuta la aplicación.</p>
</div>
<div id="tarea-9-la-interfaz-de-predicción" class="section level3 hasAnchor" number="7.2.10">
<h3><span class="header-section-number">7.2.10</span> Tarea 9: La Interfaz de predicción<a href="#tarea-9-la-interfaz-de-predicci%C3%B3n" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Aqui vamos a construir la última pieza de nuestra aplicación: la pestaña de “Predicciones”. Crearemos un formulario donde el usuario podrá introducir los datos de un paciente y, al instante, obtener una predicción sobre su riesgo cardíaco, presentada de una forma visual, clara e informativa.</p>
<p>En esta tarea, primero diseñaremos el formulario en <code>ui.R</code>. Necesitaremos un slider o selector para cada una de las 11 características de nuestro modelo. A la derecha, dejaremos espacios (<code>uiOutput</code> y <code>plotlyOutput</code>) para nuestros resultados dinámicos.</p>
<p>En el archivo <code>ui.R</code> vamos a llenar el contenido de la tercera pestaña (<code>tabItem(tabName = "predicciones", ...)</code>).</p>
<details close>
<summary>
👁️ Resultado de esta tarea
</summary>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="vizshiny.html#cb20-1" tabindex="-1"></a><span class="co"># Contenido de la Pestaña 3: Predicciones</span></span>
<span id="cb20-2"><a href="vizshiny.html#cb20-2" tabindex="-1"></a><span class="fu">tabItem</span>(<span class="at">tabName =</span> <span class="st">&quot;predicciones&quot;</span>,</span>
<span id="cb20-3"><a href="vizshiny.html#cb20-3" tabindex="-1"></a>        <span class="fu">h2</span>(<span class="st">&quot;Realizar una Predicción&quot;</span>),</span>
<span id="cb20-4"><a href="vizshiny.html#cb20-4" tabindex="-1"></a>        <span class="fu">fluidRow</span>(</span>
<span id="cb20-5"><a href="vizshiny.html#cb20-5" tabindex="-1"></a>          <span class="co"># Caja de Inputs para los datos del paciente</span></span>
<span id="cb20-6"><a href="vizshiny.html#cb20-6" tabindex="-1"></a>          <span class="fu">box</span>(</span>
<span id="cb20-7"><a href="vizshiny.html#cb20-7" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">&quot;Ingresa los datos del paciente:&quot;</span>, <span class="at">status =</span> <span class="st">&quot;primary&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">4</span>,</span>
<span id="cb20-8"><a href="vizshiny.html#cb20-8" tabindex="-1"></a>            </span>
<span id="cb20-9"><a href="vizshiny.html#cb20-9" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="st">&quot;pred_Age&quot;</span>, <span class="st">&quot;Edad:&quot;</span>, <span class="at">min =</span> <span class="dv">28</span>, <span class="at">max =</span> <span class="dv">77</span>, <span class="at">value =</span> <span class="dv">50</span>),</span>
<span id="cb20-10"><a href="vizshiny.html#cb20-10" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="st">&quot;pred_Sex&quot;</span>, <span class="st">&quot;Sexo:&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)),</span>
<span id="cb20-11"><a href="vizshiny.html#cb20-11" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="st">&quot;pred_ChestPainType&quot;</span>, <span class="st">&quot;Tipo de Dolor de Pecho:&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;ASY&quot;</span>, <span class="st">&quot;ATA&quot;</span>, <span class="st">&quot;NAP&quot;</span>, <span class="st">&quot;TA&quot;</span>)),</span>
<span id="cb20-12"><a href="vizshiny.html#cb20-12" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="st">&quot;pred_RestingBP&quot;</span>, <span class="st">&quot;Presión Arterial en Reposo (mm Hg):&quot;</span>, <span class="at">min =</span> <span class="dv">80</span>, <span class="at">max =</span> <span class="dv">200</span>, <span class="at">value =</span> <span class="dv">120</span>),</span>
<span id="cb20-13"><a href="vizshiny.html#cb20-13" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="st">&quot;pred_Cholesterol&quot;</span>, <span class="st">&quot;Colesterol (mm/dl):&quot;</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">603</span>, <span class="at">value =</span> <span class="dv">200</span>),</span>
<span id="cb20-14"><a href="vizshiny.html#cb20-14" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="st">&quot;pred_FastingBS&quot;</span>, <span class="st">&quot;Azúcar en Sangre en Ayunas (&gt; 120 mg/dl):&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;0&quot;</span>, <span class="st">&quot;1&quot;</span>)),</span>
<span id="cb20-15"><a href="vizshiny.html#cb20-15" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="st">&quot;pred_RestingECG&quot;</span>, <span class="st">&quot;Resultados de Electrocardiograma:&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Normal&quot;</span>, <span class="st">&quot;ST&quot;</span>, <span class="st">&quot;LVH&quot;</span>)),</span>
<span id="cb20-16"><a href="vizshiny.html#cb20-16" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="st">&quot;pred_MaxHR&quot;</span>, <span class="st">&quot;Frecuencia Cardíaca Máxima:&quot;</span>, <span class="at">min =</span> <span class="dv">60</span>, <span class="at">max =</span> <span class="dv">202</span>, <span class="at">value =</span> <span class="dv">150</span>),</span>
<span id="cb20-17"><a href="vizshiny.html#cb20-17" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="st">&quot;pred_ExerciseAngina&quot;</span>, <span class="st">&quot;Angina Inducida por Ejercicio:&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Y&quot;</span>, <span class="st">&quot;N&quot;</span>)),</span>
<span id="cb20-18"><a href="vizshiny.html#cb20-18" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="st">&quot;pred_Oldpeak&quot;</span>, <span class="st">&quot;Oldpeak (Depresión del ST):&quot;</span>, <span class="at">min =</span> <span class="sc">-</span><span class="fl">2.6</span>, <span class="at">max =</span> <span class="fl">6.2</span>, <span class="at">value =</span> <span class="dv">1</span>),</span>
<span id="cb20-19"><a href="vizshiny.html#cb20-19" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="st">&quot;pred_ST_Slope&quot;</span>, <span class="st">&quot;Pendiente del Segmento ST:&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Up&quot;</span>, <span class="st">&quot;Flat&quot;</span>, <span class="st">&quot;Down&quot;</span>)),</span>
<span id="cb20-20"><a href="vizshiny.html#cb20-20" tabindex="-1"></a>            </span>
<span id="cb20-21"><a href="vizshiny.html#cb20-21" tabindex="-1"></a>            <span class="co"># Botón para ejecutar la predicción</span></span>
<span id="cb20-22"><a href="vizshiny.html#cb20-22" tabindex="-1"></a>            <span class="fu">actionButton</span>(<span class="st">&quot;predecir&quot;</span>, <span class="st">&quot;Predecir&quot;</span>, <span class="at">class =</span> <span class="st">&quot;btn-primary btn-lg&quot;</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;chart-line&quot;</span>), <span class="at">width =</span> <span class="st">&#39;100%&#39;</span>)</span>
<span id="cb20-23"><a href="vizshiny.html#cb20-23" tabindex="-1"></a>          ),</span>
<span id="cb20-24"><a href="vizshiny.html#cb20-24" tabindex="-1"></a>          </span>
<span id="cb20-25"><a href="vizshiny.html#cb20-25" tabindex="-1"></a>          <span class="co"># Caja para mostrar los resultados</span></span>
<span id="cb20-26"><a href="vizshiny.html#cb20-26" tabindex="-1"></a>          <span class="fu">box</span>(</span>
<span id="cb20-27"><a href="vizshiny.html#cb20-27" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">&quot;Resultado de la Predicción&quot;</span>, <span class="at">status =</span> <span class="st">&quot;success&quot;</span>, <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="dv">8</span>,</span>
<span id="cb20-28"><a href="vizshiny.html#cb20-28" tabindex="-1"></a>            </span>
<span id="cb20-29"><a href="vizshiny.html#cb20-29" tabindex="-1"></a>            <span class="co"># Un placeholder para nuestra caja de info dinámica</span></span>
<span id="cb20-30"><a href="vizshiny.html#cb20-30" tabindex="-1"></a>            <span class="fu">uiOutput</span>(<span class="st">&quot;resultado_pred_box&quot;</span>),</span>
<span id="cb20-31"><a href="vizshiny.html#cb20-31" tabindex="-1"></a>            </span>
<span id="cb20-32"><a href="vizshiny.html#cb20-32" tabindex="-1"></a>            <span class="fu">hr</span>(), <span class="co"># Un separador visual</span></span>
<span id="cb20-33"><a href="vizshiny.html#cb20-33" tabindex="-1"></a>            </span>
<span id="cb20-34"><a href="vizshiny.html#cb20-34" tabindex="-1"></a>            <span class="co"># Un placeholder para nuestro gráfico de contexto</span></span>
<span id="cb20-35"><a href="vizshiny.html#cb20-35" tabindex="-1"></a>            <span class="fu">h4</span>(<span class="st">&quot;Contexto de los Datos Ingresados&quot;</span>),</span>
<span id="cb20-36"><a href="vizshiny.html#cb20-36" tabindex="-1"></a>            <span class="fu">plotlyOutput</span>(<span class="st">&quot;contexto_plot&quot;</span>)</span>
<span id="cb20-37"><a href="vizshiny.html#cb20-37" tabindex="-1"></a>          )</span>
<span id="cb20-38"><a href="vizshiny.html#cb20-38" tabindex="-1"></a>        )</span>
<span id="cb20-39"><a href="vizshiny.html#cb20-39" tabindex="-1"></a>)</span></code></pre></div>
</details>
</details>
</div>
<div id="tarea-10-la-lógica-de-predicción-en-server.r" class="section level3 hasAnchor" number="7.2.11">
<h3><span class="header-section-number">7.2.11</span> Tarea 10: La Lógica de predicción en server.R<a href="#tarea-10-la-l%C3%B3gica-de-predicci%C3%B3n-en-server.r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En esta tarea usaremos <code>eventReactive</code>, que es un primo de <code>observeEvent</code>. Mas información sobre <code>eventReactive</code> aqui: <a href="https://shiny.posit.co/r/reference/shiny/0.11/observeevent.html">Link documentación</a></p>
<p>Piensa que si <code>observeEvent</code> es un “guardia” que hace cosas, <code>eventReactive</code> es un “científico cauteloso”. El científico recoge todos los ingredientes (los 11 inputs), pero solo ejecuta el experimento (la predicción) cuando se presiona el botón “Predecir”. El resultado del experimento se guarda y puede ser usado por múltiples salidas.</p>
<details close>
<summary>
👁️ Resultado de esta tarea
</summary>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="vizshiny.html#cb21-1" tabindex="-1"></a><span class="co"># --- Pestaña 3: Lógica de Predicciones ---</span></span>
<span id="cb21-2"><a href="vizshiny.html#cb21-2" tabindex="-1"></a>  </span>
<span id="cb21-3"><a href="vizshiny.html#cb21-3" tabindex="-1"></a>  <span class="co"># 1. El &quot;científico cauteloso&quot;: se activa con el botón &quot;predecir&quot;</span></span>
<span id="cb21-4"><a href="vizshiny.html#cb21-4" tabindex="-1"></a>  prediccion_hecha <span class="ot">&lt;-</span> <span class="fu">eventReactive</span>(input<span class="sc">$</span>predecir, {</span>
<span id="cb21-5"><a href="vizshiny.html#cb21-5" tabindex="-1"></a>    <span class="co"># Requisito: que ya se haya entrenado un modelo</span></span>
<span id="cb21-6"><a href="vizshiny.html#cb21-6" tabindex="-1"></a>    <span class="fu">req</span>(valores_reactivos<span class="sc">$</span>modelo)</span>
<span id="cb21-7"><a href="vizshiny.html#cb21-7" tabindex="-1"></a>    </span>
<span id="cb21-8"><a href="vizshiny.html#cb21-8" tabindex="-1"></a>    <span class="co"># Recolecta todos los inputs en un dataframe de una sola fila</span></span>
<span id="cb21-9"><a href="vizshiny.html#cb21-9" tabindex="-1"></a>    datos_nuevos <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb21-10"><a href="vizshiny.html#cb21-10" tabindex="-1"></a>      <span class="at">Age =</span> <span class="fu">as.numeric</span>(input<span class="sc">$</span>pred_Age), <span class="at">Sex =</span> <span class="fu">factor</span>(input<span class="sc">$</span>pred_Sex, <span class="at">levels =</span> <span class="fu">levels</span>(df<span class="sc">$</span>Sex)),</span>
<span id="cb21-11"><a href="vizshiny.html#cb21-11" tabindex="-1"></a>      <span class="at">ChestPainType =</span> <span class="fu">factor</span>(input<span class="sc">$</span>pred_ChestPainType, <span class="at">levels =</span> <span class="fu">levels</span>(df<span class="sc">$</span>ChestPainType)),</span>
<span id="cb21-12"><a href="vizshiny.html#cb21-12" tabindex="-1"></a>      <span class="at">RestingBP =</span> <span class="fu">as.numeric</span>(input<span class="sc">$</span>pred_RestingBP), <span class="at">Cholesterol =</span> <span class="fu">as.numeric</span>(input<span class="sc">$</span>pred_Cholesterol),</span>
<span id="cb21-13"><a href="vizshiny.html#cb21-13" tabindex="-1"></a>      <span class="at">FastingBS =</span> <span class="fu">factor</span>(input<span class="sc">$</span>pred_FastingBS, <span class="at">levels =</span> <span class="fu">levels</span>(df<span class="sc">$</span>FastingBS)),</span>
<span id="cb21-14"><a href="vizshiny.html#cb21-14" tabindex="-1"></a>      <span class="at">RestingECG =</span> <span class="fu">factor</span>(input<span class="sc">$</span>pred_RestingECG, <span class="at">levels =</span> <span class="fu">levels</span>(df<span class="sc">$</span>RestingECG)),</span>
<span id="cb21-15"><a href="vizshiny.html#cb21-15" tabindex="-1"></a>      <span class="at">MaxHR =</span> <span class="fu">as.numeric</span>(input<span class="sc">$</span>pred_MaxHR),</span>
<span id="cb21-16"><a href="vizshiny.html#cb21-16" tabindex="-1"></a>      <span class="at">ExerciseAngina =</span> <span class="fu">factor</span>(input<span class="sc">$</span>pred_ExerciseAngina, <span class="at">levels =</span> <span class="fu">levels</span>(df<span class="sc">$</span>ExerciseAngina)),</span>
<span id="cb21-17"><a href="vizshiny.html#cb21-17" tabindex="-1"></a>      <span class="at">Oldpeak =</span> <span class="fu">as.numeric</span>(input<span class="sc">$</span>pred_Oldpeak),</span>
<span id="cb21-18"><a href="vizshiny.html#cb21-18" tabindex="-1"></a>      <span class="at">ST_Slope =</span> <span class="fu">factor</span>(input<span class="sc">$</span>pred_ST_Slope, <span class="at">levels =</span> <span class="fu">levels</span>(df<span class="sc">$</span>ST_Slope))</span>
<span id="cb21-19"><a href="vizshiny.html#cb21-19" tabindex="-1"></a>    )</span>
<span id="cb21-20"><a href="vizshiny.html#cb21-20" tabindex="-1"></a>    </span>
<span id="cb21-21"><a href="vizshiny.html#cb21-21" tabindex="-1"></a>    <span class="co"># Usa el modelo guardado para predecir</span></span>
<span id="cb21-22"><a href="vizshiny.html#cb21-22" tabindex="-1"></a>    prediccion <span class="ot">&lt;-</span> <span class="fu">predict</span>(valores_reactivos<span class="sc">$</span>modelo, <span class="at">newdata =</span> datos_nuevos, <span class="at">type =</span> <span class="st">&quot;raw&quot;</span>)</span>
<span id="cb21-23"><a href="vizshiny.html#cb21-23" tabindex="-1"></a>    probabilidad <span class="ot">&lt;-</span> <span class="fu">predict</span>(valores_reactivos<span class="sc">$</span>modelo, <span class="at">newdata =</span> datos_nuevos, <span class="at">type =</span> <span class="st">&quot;prob&quot;</span>)</span>
<span id="cb21-24"><a href="vizshiny.html#cb21-24" tabindex="-1"></a>    </span>
<span id="cb21-25"><a href="vizshiny.html#cb21-25" tabindex="-1"></a>    <span class="co"># Devuelve una lista con todos los resultados</span></span>
<span id="cb21-26"><a href="vizshiny.html#cb21-26" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">pred =</span> prediccion, <span class="at">prob =</span> probabilidad, <span class="at">datos =</span> datos_nuevos)</span>
<span id="cb21-27"><a href="vizshiny.html#cb21-27" tabindex="-1"></a>  })</span>
<span id="cb21-28"><a href="vizshiny.html#cb21-28" tabindex="-1"></a></span>
<span id="cb21-29"><a href="vizshiny.html#cb21-29" tabindex="-1"></a>  <span class="co"># 2. El resultado visual: crea la infoBox dinámicamente</span></span>
<span id="cb21-30"><a href="vizshiny.html#cb21-30" tabindex="-1"></a>  output<span class="sc">$</span>resultado_pred_box <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb21-31"><a href="vizshiny.html#cb21-31" tabindex="-1"></a>    <span class="fu">req</span>(<span class="fu">prediccion_hecha</span>()) <span class="co"># Requiere que se haya hecho una predicción</span></span>
<span id="cb21-32"><a href="vizshiny.html#cb21-32" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">prediccion_hecha</span>()</span>
<span id="cb21-33"><a href="vizshiny.html#cb21-33" tabindex="-1"></a>    prob_si <span class="ot">&lt;-</span> <span class="fu">round</span>(res<span class="sc">$</span>prob<span class="sc">$</span><span class="st">&#39;Sí&#39;</span> <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)</span>
<span id="cb21-34"><a href="vizshiny.html#cb21-34" tabindex="-1"></a>    </span>
<span id="cb21-35"><a href="vizshiny.html#cb21-35" tabindex="-1"></a>    <span class="cf">if</span> (res<span class="sc">$</span>pred <span class="sc">==</span> <span class="st">&quot;Sí&quot;</span>) {</span>
<span id="cb21-36"><a href="vizshiny.html#cb21-36" tabindex="-1"></a>      <span class="fu">infoBox</span>(<span class="at">title =</span> <span class="st">&quot;Resultado: Alto Riesgo&quot;</span>,</span>
<span id="cb21-37"><a href="vizshiny.html#cb21-37" tabindex="-1"></a>              <span class="at">value =</span> <span class="fu">paste0</span>(prob_si, <span class="st">&quot;% de prob. de enfermedad&quot;</span>),</span>
<span id="cb21-38"><a href="vizshiny.html#cb21-38" tabindex="-1"></a>              <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;triangle-exclamation&quot;</span>), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-39"><a href="vizshiny.html#cb21-39" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb21-40"><a href="vizshiny.html#cb21-40" tabindex="-1"></a>      <span class="fu">infoBox</span>(<span class="at">title =</span> <span class="st">&quot;Resultado: Bajo Riesgo&quot;</span>,</span>
<span id="cb21-41"><a href="vizshiny.html#cb21-41" tabindex="-1"></a>              <span class="at">value =</span> <span class="fu">paste0</span>(prob_si, <span class="st">&quot;% de prob. de enfermedad&quot;</span>),</span>
<span id="cb21-42"><a href="vizshiny.html#cb21-42" tabindex="-1"></a>              <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">&quot;check-circle&quot;</span>), <span class="at">color =</span> <span class="st">&quot;green&quot;</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-43"><a href="vizshiny.html#cb21-43" tabindex="-1"></a>    }</span>
<span id="cb21-44"><a href="vizshiny.html#cb21-44" tabindex="-1"></a>  })</span>
<span id="cb21-45"><a href="vizshiny.html#cb21-45" tabindex="-1"></a></span>
<span id="cb21-46"><a href="vizshiny.html#cb21-46" tabindex="-1"></a>  <span class="co"># 3. El gráfico de contexto: compara al paciente con los promedios</span></span>
<span id="cb21-47"><a href="vizshiny.html#cb21-47" tabindex="-1"></a>  output<span class="sc">$</span>contexto_plot <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb21-48"><a href="vizshiny.html#cb21-48" tabindex="-1"></a>    <span class="fu">req</span>(<span class="fu">prediccion_hecha</span>())</span>
<span id="cb21-49"><a href="vizshiny.html#cb21-49" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">prediccion_hecha</span>()</span>
<span id="cb21-50"><a href="vizshiny.html#cb21-50" tabindex="-1"></a>    vars_numericas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>, <span class="st">&quot;RestingBP&quot;</span>, <span class="st">&quot;Cholesterol&quot;</span>, <span class="st">&quot;MaxHR&quot;</span>)</span>
<span id="cb21-51"><a href="vizshiny.html#cb21-51" tabindex="-1"></a>    </span>
<span id="cb21-52"><a href="vizshiny.html#cb21-52" tabindex="-1"></a>    promedios <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb21-53"><a href="vizshiny.html#cb21-53" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">all_of</span>(vars_numericas), EnfermedadCorazon) <span class="sc">%&gt;%</span></span>
<span id="cb21-54"><a href="vizshiny.html#cb21-54" tabindex="-1"></a>      <span class="fu">group_by</span>(EnfermedadCorazon) <span class="sc">%&gt;%</span></span>
<span id="cb21-55"><a href="vizshiny.html#cb21-55" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), mean)) <span class="sc">%&gt;%</span></span>
<span id="cb21-56"><a href="vizshiny.html#cb21-56" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="sc">-</span>EnfermedadCorazon, <span class="at">names_to =</span> <span class="st">&quot;Variable&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Valor&quot;</span>)</span>
<span id="cb21-57"><a href="vizshiny.html#cb21-57" tabindex="-1"></a></span>
<span id="cb21-58"><a href="vizshiny.html#cb21-58" tabindex="-1"></a>    datos_paciente <span class="ot">&lt;-</span> res<span class="sc">$</span>datos <span class="sc">%&gt;%</span></span>
<span id="cb21-59"><a href="vizshiny.html#cb21-59" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">all_of</span>(vars_numericas)) <span class="sc">%&gt;%</span></span>
<span id="cb21-60"><a href="vizshiny.html#cb21-60" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">&quot;Variable&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Valor&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-61"><a href="vizshiny.html#cb21-61" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">EnfermedadCorazon =</span> <span class="st">&quot;Paciente Actual&quot;</span>)</span>
<span id="cb21-62"><a href="vizshiny.html#cb21-62" tabindex="-1"></a></span>
<span id="cb21-63"><a href="vizshiny.html#cb21-63" tabindex="-1"></a>    datos_plot <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(promedios, datos_paciente)</span>
<span id="cb21-64"><a href="vizshiny.html#cb21-64" tabindex="-1"></a>    </span>
<span id="cb21-65"><a href="vizshiny.html#cb21-65" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(datos_plot, <span class="fu">aes</span>(<span class="at">x =</span> Variable, <span class="at">y =</span> Valor, <span class="at">fill =</span> EnfermedadCorazon)) <span class="sc">+</span></span>
<span id="cb21-66"><a href="vizshiny.html#cb21-66" tabindex="-1"></a>      <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb21-67"><a href="vizshiny.html#cb21-67" tabindex="-1"></a>      <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Sí&quot;</span> <span class="ot">=</span> <span class="st">&quot;#E74C3C&quot;</span>, <span class="st">&quot;No&quot;</span> <span class="ot">=</span> <span class="st">&quot;#2ECC71&quot;</span>, <span class="st">&quot;Paciente Actual&quot;</span> <span class="ot">=</span> <span class="st">&quot;#3498DB&quot;</span>)) <span class="sc">+</span></span>
<span id="cb21-68"><a href="vizshiny.html#cb21-68" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Comparación con Valores Promedio&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Valor&quot;</span>, <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Grupo&quot;</span>) <span class="sc">+</span></span>
<span id="cb21-69"><a href="vizshiny.html#cb21-69" tabindex="-1"></a>      <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">coord_flip</span>()</span>
<span id="cb21-70"><a href="vizshiny.html#cb21-70" tabindex="-1"></a></span>
<span id="cb21-71"><a href="vizshiny.html#cb21-71" tabindex="-1"></a>    <span class="fu">ggplotly</span>(p)</span>
<span id="cb21-72"><a href="vizshiny.html#cb21-72" tabindex="-1"></a>  })</span></code></pre></div>
</details>
</details>
<p>Guarda ambos archivos (<code>ui.R</code> y <code>server.R</code>) y ejecuta la aplicación.</p>
</div>
</div>
<div id="ejercicios-practicos" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Ejercicios practicos<a href="vizshiny.html#ejercicios-practicos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ahora es tu turno de personalizar y llevar mas alla la aplicación construida.</p>
<hr />
<div id="desafío-1-fácil-dale-tu-estilo" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Desafío 1 (Fácil): ¡Dale tu estilo!<a href="#desaf%C3%ADo-1-f%C3%A1cil-dale-tu-estilo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>Misión:</strong> La aplicación usa un tema de color púrpura (<code>skin = 'purple'</code>). Investiga qué otros <code>skins</code> están disponibles en <code>shinydashboard</code> y personaliza la aplicación con el color que más te guste.</p></li>
<li><p><strong>¿Por qué es importante?</strong> Aprender a personalizar la apariencia de tu app es el primer paso para hacerla tuya y adaptarla a diferentes necesidades o marcas.</p></li>
</ul>
<details close>
<summary>
<strong>Pistas Clave</strong>
</summary>
<ul>
<li>Busca la función <code>dashboardPage()</code> en tu archivo <code>ui.R</code>.
<ul>
<li>El argumento que controla el color es <code>skin</code>.</li>
<li>Prueba con otros colores como <code>"blue"</code>, <code>"black"</code>, <code>"green"</code>, <code>"yellow"</code>, o <code>"red"</code>.</li>
</ul></li>
</ul>
</details>
</div>
<div id="desafío-2-intermedio-pacientes-de-ejemplo" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Desafío 2 (Intermedio): Pacientes de ejemplo<a href="#desaf%C3%ADo-2-intermedio-pacientes-de-ejemplo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>Misión:</strong> Rellenar los 11 campos en la pestaña de predicción cada vez es lento. Añade dos botones: “Cargar Paciente de Alto Riesgo” y “Cargar Paciente de Bajo Riesgo” que rellenen automáticamente los campos.</p></li>
<li><p><strong>¿Por qué es importante?</strong> Aprenderás a controlar la interfaz de usuario desde el servidor. Esta es una de las técnicas más poderosas de Shiny, ya que te permite crear guías y atajos para tus usuarios.</p></li>
</ul>
<details close>
<summary>
<strong>Pistas Clave</strong>
</summary>
<ul>
<li>Añade dos <code>actionButton()</code> a tu <code>ui.R</code> en la caja de controles de predicción.
<ul>
<li>En <code>server.R</code>, necesitarás crear dos nuevos bloques <code>observeEvent</code>, uno para cada botón.</li>
<li>Dentro de cada <code>observeEvent</code>, busca una fila en el dataframe <code>df</code> que cumpla la condición. Luego, usa la familia de funciones <code>updateSliderInput()</code> y <code>updateSelectInput()</code> para actualizar cada uno de los 11 campos.</li>
</ul></li>
</ul>
</details>
<hr />
</div>
<div id="desafío-3-avanzado-guarda-tu-modelo" class="section level3 hasAnchor" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> Desafío 3 (Avanzado): ¡Guarda tu modelo!<a href="#desaf%C3%ADo-3-avanzado-guarda-tu-modelo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>Misión:</strong> El modelo que entrenas se pierde cada vez que cierras la app. Añade un botón de “Guardar Modelo” en la pestaña de entrenamiento. Al hacer clic, el modelo entrenado debe guardarse como un archivo <code>.rds</code> en el directorio de tu proyecto.</p></li>
<li><p><strong>¿Por qué es importante?</strong> Esto introduce un concepto clave de <strong>MLOps</strong>: la persistencia y el versionado de modelos. Separa el proceso de entrenamiento del de predicción, permitiendo que tu app cargue modelos pre-entrenados.</p></li>
</ul>
<details close>
<summary>
<strong>Pistas Clave</strong>
</summary>
<ul>
<li>Añade un <code>actionButton("guardar_modelo", ...)</code> a la caja de controles de entrenamiento en <code>ui.R</code>.
<ul>
<li>En <code>server.R</code>, crea un <code>observeEvent</code> que vigile este nuevo botón.</li>
<li>Dentro del <code>observeEvent</code>, usa la función <code>saveRDS()</code>. El objeto que quieres guardar está en <code>valores_reactivos$modelo</code>. Puedes darle un nombre dinámico al archivo, como <code>paste0(input$modelo_seleccionado, "_", Sys.Date(), ".rds")</code>.</li>
</ul></li>
</ul>
</details>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vizplotly.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="referencias.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/rstudio/bookdown-demo/edit/master/07-vizshiny.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
